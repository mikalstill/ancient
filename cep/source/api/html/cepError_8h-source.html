<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>cepError.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>cepError.h</h1><div class="fragment"><pre>00001 
00002 <font class="comment">/*</font>
00003 <font class="comment">   Imp for the CEP error</font>
00004 <font class="comment">   Copyright (C) Michael Still                       2002</font>
00005 <font class="comment">   Copyright (C) Blake Swadling &lt;blake@swadling.org&gt; 2002</font>
00006 <font class="comment">   </font>
00007 <font class="comment">   This program is free software; you can redistribute it and/or modify</font>
00008 <font class="comment">   it under the terms of the GNU General Public License as published by</font>
00009 <font class="comment">   the Free Software Foundation; either version 2 of the License, or</font>
00010 <font class="comment">   (at your option) any later version.</font>
00011 <font class="comment">   </font>
00012 <font class="comment">   This program is distributed in the hope that it will be useful,</font>
00013 <font class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</font>
00014 <font class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</font>
00015 <font class="comment">   GNU General Public License for more details.</font>
00016 <font class="comment">   </font>
00017 <font class="comment">   You should have received a copy of the GNU General Public License</font>
00018 <font class="comment">   along with this program; if not, write to the Free Software</font>
00019 <font class="comment">   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</font>
00020 <font class="comment">*/</font>
00021 
00022 <font class="preprocessor">#ifndef CEP_ERROR_HEADER</font>
00023 <font class="preprocessor"></font><font class="preprocessor">#define CEP_ERROR_HEADER</font>
00024 <font class="preprocessor"></font>
00025 <font class="comment">/******************************************************************************</font>
00026 <font class="comment">DOCBOOK START</font>
00027 <font class="comment"></font>
00028 <font class="comment">FUNCTION cepDebugPrint</font>
00029 <font class="comment">PURPOSE print out debugging information via cepError</font>
00030 <font class="comment"></font>
00031 <font class="comment">SYNOPSIS START</font>
00032 <font class="comment">cepDebugPrint(string debugMessage);</font>
00033 <font class="comment">SYNOPSIS END</font>
00034 <font class="comment"></font>
00035 <font class="comment">DESCRIPTION START</font>
00036 <font class="comment">&lt;command&gt;cepDebugPrint&lt;/command&gt; creates a cepError of debug severity and immediately displays it -- this will normally result in the debug message being logged. The macro also pack into the message the name of the source file which called &lt;command&gt;cepDebugPrint&lt;/command&gt;, and the line number that the call occurred at, for ease of debugging.</font>
00037 <font class="comment">DESCRIPTION END</font>
00038 <font class="comment"></font>
00039 <font class="comment">SEEALSO cepDebug</font>
00040 <font class="comment">DOCBOOK END</font>
00041 <font class="comment">******************************************************************************/</font>
00042 
00043 <font class="comment">// This prints out some debugging information which is useful, use it instead</font>
00044 <font class="comment">// of:</font>
00045 <font class="comment">// cepError cepDebugPrint("Some text", cepError::sevDebug);</font>
00046 <font class="comment">// cepDebugPrint.display();</font>
00047 
00049 <font class="comment">// THIS CANNOT DO A DISPLAY, AS THE CONFIG DB CODE USES THIS TO LOG DB PROBLEMS</font>
00050 <font class="comment">// AND cepError::display() USES THE CONFIG DB...</font>
00052 <font class="comment">#define cepDebugPrint(errmsg) \</font>
00053   { \
00054     <a class="code" href="classcepError.html">cepError</a> newname_cepDebugPrint(string(<font class="stringliteral">""</font>) + string(errmsg) + string(<font class="stringliteral">" at "</font>) + string(__FILE__) + \
00055             string(<font class="stringliteral">":"</font>) + cepToString(__LINE__), cepError::sevDebug); \
00056     newname_cepDebugPrint.<a class="code" href="classcepError.html#a6">log</a>(); \
00057   }
00058 
00059 <font class="comment">/******************************************************************************</font>
00060 <font class="comment">DOCBOOK START</font>
00061 <font class="comment"></font>
00062 <font class="comment">FUNCTION cepError</font>
00063 <font class="comment">PURPOSE represent errors</font>
00064 <font class="comment"></font>
00065 <font class="comment">SYNOPSIS START</font>
00066 <font class="comment">enum severity</font>
00067 <font class="comment">{</font>
00068 <font class="comment">  sevOk = 0,</font>
00069 <font class="comment">  sevDebug,</font>
00070 <font class="comment">  sevInformational,</font>
00071 <font class="comment">  sevWarning,</font>
00072 <font class="comment">  sevErrorRecoverable,</font>
00073 <font class="comment">  sevErrorFatal,</font>
00074 <font class="comment">  sevMax</font>
00075 <font class="comment">};</font>
00076 <font class="comment"></font>
00077 <font class="comment">cepError ();</font>
00078 <font class="comment">cepError (const string&amp; msg);</font>
00079 <font class="comment">cepError (const string&amp; msg, severity level);</font>
00080 <font class="comment">~cepError ();</font>
00081 <font class="comment"></font>
00082 <font class="comment">bool isReal ();</font>
00083 <font class="comment">void clear();</font>
00084 <font class="comment">void log();</font>
00085 <font class="comment">void display ();</font>
00086 <font class="comment">string &amp;amp; getMessage();</font>
00087 <font class="comment">int getSeverity();</font>
00088 <font class="comment">SYNOPSIS END</font>
00089 <font class="comment"></font>
00090 <font class="comment">DESCRIPTION START</font>
00091 <font class="comment">This class represents errors that may be generated during execution</font>
00092 <font class="comment">&lt;/para&gt;</font>
00093 <font class="comment"></font>
00094 <font class="comment">&lt;para&gt;</font>
00095 <font class="comment">The enumeration &lt;command&gt;severity&lt;/command&gt; defines the possible error levels available to &lt;command&gt;cepError&lt;/command&gt;. These levels have differing default resposes within the &lt;command&gt;cepError&lt;/command&gt; class, depending on their perceived importance:</font>
00096 <font class="comment"></font>
00097 <font class="comment">//todo_mikal: implement error level actions as defined here</font>
00098 <font class="comment">&lt;orderedlist&gt;</font>
00099 <font class="comment">&lt;listitem&gt;&lt;para&gt;&lt;command&gt;sevOk&lt;/command&gt;: this error is not really an error, and will not be displayed. This is the default error level.&lt;/para&gt;&lt;/listitem&gt;</font>
00100 <font class="comment">&lt;listitem&gt;&lt;para&gt;&lt;command&gt;sevDebug&lt;/command&gt;: this is a debugging message, which will normally be logged, but not displayed. There may be a very large number of these during the normal operation of the application.&lt;/para&gt;&lt;/listitem&gt;</font>
00101 <font class="comment">&lt;listitem&gt;&lt;para&gt;&lt;command&gt;sevInformational&lt;/command&gt;: this is an informational message which will be displayed, and logged.&lt;/para&gt;&lt;/listitem&gt;</font>
00102 <font class="comment">&lt;listitem&gt;&lt;para&gt;&lt;command&gt;sevWarning&lt;/command&gt;: this is a warning that would normally be of interest to the user. It will be logged and displayed by default.&lt;/para&gt;&lt;/listitem&gt;</font>
00103 <font class="comment">&lt;listitem&gt;&lt;para&gt;&lt;command&gt;sevErrorRecoverable&lt;/command&gt;: this level reports an error, which the application can recover from. It will be displayed and logged by default.&lt;/para&gt;&lt;/listitem&gt;</font>
00104 <font class="comment">&lt;listitem&gt;&lt;para&gt;&lt;command&gt;sevErrorFatal&lt;/command&gt;: this is an error. It will be by default displayed, logged, and the application will exit after the user has acknowledged the error. Display of this error type cannot be disabled by the user.&lt;/para&gt;&lt;/listitem&gt;</font>
00105 <font class="comment">&lt;/orderedlist&gt;</font>
00106 <font class="comment">&lt;/para&gt;</font>
00107 <font class="comment"></font>
00108 <font class="comment">&lt;para&gt;</font>
00109 <font class="comment">&lt;command&gt;cepError ();&lt;/command&gt;</font>
00110 <font class="comment">Default constructor. This will create a &lt;command&gt;cepError&lt;/command&gt; with a default severity of &lt;command&gt;sevOk&lt;/command&gt;.</font>
00111 <font class="comment">&lt;/para&gt;</font>
00112 <font class="comment"></font>
00113 <font class="comment">&lt;para&gt;</font>
00114 <font class="comment">&lt;command&gt;cepError (const string&amp;amp; msg);&lt;/command&gt;</font>
00115 <font class="comment">Contruct a &lt;command&gt;cepError&lt;/command&gt; with a severity of &lt;command&gt;sevErrorFatal&lt;/command&gt;.</font>
00116 <font class="comment">&lt;/para&gt;</font>
00117 <font class="comment"></font>
00118 <font class="comment">&lt;para&gt;</font>
00119 <font class="comment">&lt;command&gt;cepError (const string&amp;amp; msg, severity level);&lt;/command&gt;</font>
00120 <font class="comment">Construct a &lt;command&gt;cepError&lt;/command&gt; with the specified severity.</font>
00121 <font class="comment">&lt;/para&gt;</font>
00122 <font class="comment"></font>
00123 <font class="comment">&lt;para&gt;</font>
00124 <font class="comment">&lt;command&gt;~cepError ();&lt;/command&gt;</font>
00125 <font class="comment">If the &lt;command&gt;cepError&lt;/command&gt; has not been actioned (checked if real, copied, displayed or logged) by the time the destructor is called, then it will be actioned at this point.</font>
00126 <font class="comment">&lt;/para&gt;</font>
00127 <font class="comment"></font>
00128 <font class="comment">&lt;para&gt;</font>
00129 <font class="comment">&lt;command&gt;bool isReal ();&lt;/command&gt;</font>
00130 <font class="comment">If the &lt;command&gt;cepError&lt;/command&gt; has a severity of anything other than sevOk</font>
00131 <font class="comment">&lt;/para&gt;</font>
00132 <font class="comment"></font>
00133 <font class="comment">&lt;para&gt;</font>
00134 <font class="comment">&lt;command&gt;void clear();&lt;/command&gt;</font>
00135 <font class="comment">Clears the &lt;command&gt;cepError&lt;/command&gt; by setting severity to sevOk and removing the current message.</font>
00136 <font class="comment">&lt;/para&gt;</font>
00137 <font class="comment"></font>
00138 <font class="comment">&lt;para&gt;</font>
00139 <font class="comment">&lt;command&gt;void log();&lt;/command&gt;</font>
00140 <font class="comment">Write the &lt;command&gt;cepError&lt;/command&gt; to the log if there is an errorhandler installed.</font>
00141 <font class="comment">&lt;/para&gt;</font>
00142 <font class="comment"></font>
00143 <font class="comment">&lt;para&gt;</font>
00144 <font class="comment">&lt;command&gt;void display ();&lt;/command&gt;</font>
00145 <font class="comment">Display the &lt;command&gt;cepError&lt;/command&gt; if there is an errorHandler installed.</font>
00146 <font class="comment">&lt;/para&gt;</font>
00147 <font class="comment"></font>
00148 <font class="comment">&lt;para&gt;</font>
00149 <font class="comment">&lt;command&gt;string&amp;amp; getMessage ();&lt;/command&gt;</font>
00150 <font class="comment">queries the description of this &lt;command&gt;cepError&lt;/command&gt;.</font>
00151 <font class="comment">&lt;/para&gt;</font>
00152 <font class="comment"></font>
00153 <font class="comment">&lt;para&gt;</font>
00154 <font class="comment">&lt;command&gt;int getSeverity ();&lt;/command&gt;</font>
00155 <font class="comment">queries the severity of this &lt;command&gt;cepError&lt;/command&gt;.</font>
00156 <font class="comment">&lt;/para&gt;</font>
00157 <font class="comment">DESCRIPTION END</font>
00158 <font class="comment"></font>
00159 <font class="comment">SEEALSO cepErrorHandler</font>
00160 <font class="comment">DOCBOOK END</font>
00161 <font class="comment">******************************************************************************/</font>
00162 
00163 <font class="preprocessor">#include &lt;string&gt;</font>
00164 <font class="preprocessor">#include "cepErrorHandler.h"</font>
00165 <font class="preprocessor">#include "cepUtility.h"</font>
00166 
00167 <font class="keyword">using</font> <font class="keyword">namespace </font>std;
00168 
00169 
<a name="l00181"></a><a class="code" href="classcepError.html">00181</a> <font class="keyword">class </font><a class="code" href="classcepError.html">cepError</a>
00182 {
00183 <font class="keyword">public</font>:
<a name="l00185"></a><a class="code" href="classcepError.html#s7">00185</a>   <font class="keyword">enum</font> <a class="code" href="classcepError.html#s7">severity</a>
00186   {
00187     sevOk = 0,
00188     sevDebug,
00189     sevInformational,
00190     sevWarning,
00191     sevErrorRecoverable,
00192     sevErrorFatal,
00193     sevMax
00194   };
00195 
00197   <a class="code" href="classcepError.html#a0">cepError</a> ();
00198   
00202   <a class="code" href="classcepError.html#a0">cepError</a> (<font class="keyword">const</font> string &amp; msg);
00203   
00208   <a class="code" href="classcepError.html#a0">cepError</a> (<font class="keyword">const</font> string &amp; msg, <a class="code" href="classcepError.html#s7">severity</a> level);
00209 
00215   <font class="keyword">static</font> <font class="keywordtype">void</font> <a class="code" href="classcepError.html#d0">setErrorHandler</a>( <font class="keyword">class</font> <a class="code" href="classcepErrorHandler.html">cepErrorHandler</a>&amp; h );
00216 
00221   <a class="code" href="classcepError.html#a3">~cepError</a> ();
00222 
00226   <font class="keywordtype">bool</font> <a class="code" href="classcepError.html#a4">isReal</a> ();
00227 
00231   <font class="keywordtype">void</font> <a class="code" href="classcepError.html#a5">clear</a> ();
00232 
00236   <font class="keywordtype">void</font> <a class="code" href="classcepError.html#a6">log</a> ();
00237 
00241   <font class="keywordtype">void</font> <a class="code" href="classcepError.html#a7">display</a> ();
00242 
00243   <font class="comment">// BS - remove these when we get the friend thing for cepErrorHandler sorted</font>
00244 
00248   string &amp; <a class="code" href="classcepError.html#a8">getMessage</a>();
00249 
00253   <font class="keywordtype">int</font> <a class="code" href="classcepError.html#a9">getSeverity</a>();
00254 
00255 <font class="keyword">private</font>:
00256 
00258   <font class="keyword">static</font> <font class="keywordtype">bool</font> handlerInstalled;
00260   <font class="keyword">static</font> <font class="keyword">class </font><a class="code" href="classcepErrorHandler.html">cepErrorHandler</a> *handler;
00261 
00263   string message;
00265   <a class="code" href="classcepError.html#s7">severity</a> level;
00267   <font class="keywordtype">bool</font> actioned;
00268 };
00269 
00270 <font class="preprocessor">#endif</font>
</pre></div><hr><address><small>Generated on Sat Aug 10 20:46:06 2002 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
