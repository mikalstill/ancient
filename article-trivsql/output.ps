%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: output.dvi
%%Pages: 28
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Helvetica-Bold Palatino-Bold Palatino-Roman Courier
%%+ Palatino-Italic
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -q output.dvi -o output.ps
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2002.10.12:1624
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/copypage{}N/p 3 def @MacSetUp}N/doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N/endTexFig{end psf$SavedState restore}N/@beginspecial{SDict
begin/SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count/ocount X/dcount countdictstack N}N/@setspecial{
CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if/showpage{}N/erasepage{}N/copypage{}N newpath}N
/@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{end}
repeat grestore SpecialSave restore end}N/@defspecial{SDict begin}N
/@fedspecial{end}B/li{lineto}B/rl{rlineto}B/rc{rcurveto}B/np{/SaveX
currentpoint/SaveY X N 1 setlinecap newpath}N/st{stroke SaveX SaveY
moveto}N/fil{fill SaveX SaveY moveto}N/ellipse{/endangle X/startangle X
/yrad X/xrad X/savematrix matrix currentmatrix N TR xrad yrad scale 0 0
1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
%%BeginProcSet: color.pro
%!
TeXDict begin/setcmykcolor where{pop}{/setcmykcolor{dup 10 eq{pop
setrgbcolor}{1 sub 4 1 roll 3{3 index add neg dup 0 lt{pop 0}if 3 1 roll
}repeat setrgbcolor pop}ifelse}B}ifelse/TeXcolorcmyk{setcmykcolor}def
/TeXcolorrgb{setrgbcolor}def/TeXcolorgrey{setgray}def/TeXcolorgray{
setgray}def/TeXcolorhsb{sethsbcolor}def/currentcmykcolor where{pop}{
/currentcmykcolor{currentrgbcolor 10}B}ifelse/DC{exch dup userdict exch
known{pop pop}{X}ifelse}B/GreenYellow{0.15 0 0.69 0 setcmykcolor}DC
/Yellow{0 0 1 0 setcmykcolor}DC/Goldenrod{0 0.10 0.84 0 setcmykcolor}DC
/Dandelion{0 0.29 0.84 0 setcmykcolor}DC/Apricot{0 0.32 0.52 0
setcmykcolor}DC/Peach{0 0.50 0.70 0 setcmykcolor}DC/Melon{0 0.46 0.50 0
setcmykcolor}DC/YellowOrange{0 0.42 1 0 setcmykcolor}DC/Orange{0 0.61
0.87 0 setcmykcolor}DC/BurntOrange{0 0.51 1 0 setcmykcolor}DC
/Bittersweet{0 0.75 1 0.24 setcmykcolor}DC/RedOrange{0 0.77 0.87 0
setcmykcolor}DC/Mahogany{0 0.85 0.87 0.35 setcmykcolor}DC/Maroon{0 0.87
0.68 0.32 setcmykcolor}DC/BrickRed{0 0.89 0.94 0.28 setcmykcolor}DC/Red{
0 1 1 0 setcmykcolor}DC/OrangeRed{0 1 0.50 0 setcmykcolor}DC/RubineRed{
0 1 0.13 0 setcmykcolor}DC/WildStrawberry{0 0.96 0.39 0 setcmykcolor}DC
/Salmon{0 0.53 0.38 0 setcmykcolor}DC/CarnationPink{0 0.63 0 0
setcmykcolor}DC/Magenta{0 1 0 0 setcmykcolor}DC/VioletRed{0 0.81 0 0
setcmykcolor}DC/Rhodamine{0 0.82 0 0 setcmykcolor}DC/Mulberry{0.34 0.90
0 0.02 setcmykcolor}DC/RedViolet{0.07 0.90 0 0.34 setcmykcolor}DC
/Fuchsia{0.47 0.91 0 0.08 setcmykcolor}DC/Lavender{0 0.48 0 0
setcmykcolor}DC/Thistle{0.12 0.59 0 0 setcmykcolor}DC/Orchid{0.32 0.64 0
0 setcmykcolor}DC/DarkOrchid{0.40 0.80 0.20 0 setcmykcolor}DC/Purple{
0.45 0.86 0 0 setcmykcolor}DC/Plum{0.50 1 0 0 setcmykcolor}DC/Violet{
0.79 0.88 0 0 setcmykcolor}DC/RoyalPurple{0.75 0.90 0 0 setcmykcolor}DC
/BlueViolet{0.86 0.91 0 0.04 setcmykcolor}DC/Periwinkle{0.57 0.55 0 0
setcmykcolor}DC/CadetBlue{0.62 0.57 0.23 0 setcmykcolor}DC
/CornflowerBlue{0.65 0.13 0 0 setcmykcolor}DC/MidnightBlue{0.98 0.13 0
0.43 setcmykcolor}DC/NavyBlue{0.94 0.54 0 0 setcmykcolor}DC/RoyalBlue{1
0.50 0 0 setcmykcolor}DC/Blue{1 1 0 0 setcmykcolor}DC/Cerulean{0.94 0.11
0 0 setcmykcolor}DC/Cyan{1 0 0 0 setcmykcolor}DC/ProcessBlue{0.96 0 0 0
setcmykcolor}DC/SkyBlue{0.62 0 0.12 0 setcmykcolor}DC/Turquoise{0.85 0
0.20 0 setcmykcolor}DC/TealBlue{0.86 0 0.34 0.02 setcmykcolor}DC
/Aquamarine{0.82 0 0.30 0 setcmykcolor}DC/BlueGreen{0.85 0 0.33 0
setcmykcolor}DC/Emerald{1 0 0.50 0 setcmykcolor}DC/JungleGreen{0.99 0
0.52 0 setcmykcolor}DC/SeaGreen{0.69 0 0.50 0 setcmykcolor}DC/Green{1 0
1 0 setcmykcolor}DC/ForestGreen{0.91 0 0.88 0.12 setcmykcolor}DC
/PineGreen{0.92 0 0.59 0.25 setcmykcolor}DC/LimeGreen{0.50 0 1 0
setcmykcolor}DC/YellowGreen{0.44 0 0.74 0 setcmykcolor}DC/SpringGreen{
0.26 0 0.76 0 setcmykcolor}DC/OliveGreen{0.64 0 0.95 0.40 setcmykcolor}
DC/RawSienna{0 0.72 1 0.45 setcmykcolor}DC/Sepia{0 0.83 1 0.70
setcmykcolor}DC/Brown{0 0.81 1 0.60 setcmykcolor}DC/Tan{0.14 0.42 0.56 0
setcmykcolor}DC/Gray{0 0 0 0.50 setcmykcolor}DC/Black{0 0 0 1
setcmykcolor}DC/White{0 0 0 0 setcmykcolor}DC end

%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600 (output.dvi)
@start /Fa 106[40 149[{TeXBase1Encoding ReEncodeFont}1
66.4176 /Palatino-Roman rf /Fb 135[51 2[56 30 51 36 1[56
56 56 81 25 51 1[25 56 56 30 51 56 51 1[51 13[61 1[71
61 2[76 56 2[25 1[71 2[66 66 1[66 6[30 11[25 6[25 36[56
2[{TeXBase1Encoding ReEncodeFont}33 91.3242 /Helvetica-Bold
rf
%DVIPSBitmapFont: Fc cmmi9 9 2
/Fc 2 63 df<171C177EEE01FEEE07FCEE1FF0EE7FC0923801FF00ED07FCED1FF0ED7FC0
4A48C7FCEC07FCEC1FF0EC7FC04948C8FCEB07FCEB1FF0EB7FC04848C9FCEA07FCEA1FF0
EA7FC048CAFCA2EA7FC0EA1FF0EA07FCEA01FF38007FC0EB1FF0EB07FCEB01FF9038007F
C0EC1FF0EC07FCEC01FF9138007FC0ED1FF0ED07FCED01FF9238007FC0EE1FF0EE07FCEE
01FEEE007E171C2F2E7AA93C>60 D<127012FCB4FCEA7FC0EA1FF0EA07FCEA01FF38007F
C0EB1FF0EB07FCEB01FF9038007FC0EC1FF0EC07FCEC01FF9138007FC0ED1FF0ED07FCED
01FF9238007FC0EE1FF0EE07FCEE01FEA2EE07FCEE1FF0EE7FC0923801FF00ED07FCED1F
F0ED7FC04A48C7FCEC07FCEC1FF0EC7FC04948C8FCEB07FCEB1FF0EB7FC04848C9FCEA07
FCEA1FF0EA7FC048CAFC12FC12702F2E7AA93C>62 D E
%EndDVIPSBitmapFont
/Fd 134[42 42 1[42 46 28 32 32 38 42 37 46 65 23 37 1[23
42 42 23 32 42 34 1[37 1[42 11[46 1[65 3[78 46 8[55 1[60
6[21 42 42 42 42 42 42 42 42 42 42 25 21 28 2[32 39[44
2[{TeXBase1Encoding ReEncodeFont}45 83.022 /Palatino-Italic
rf /Fe 107[45 22[45 45 45 45 45 45 45 45 45 45 45 45
45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 1[45
45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45
45 45 1[45 45 45 45 45 45 45 45 45 45 45 45 45 1[45 45
45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45
45 45 45 45 45 45 45 33[{TeXBase1Encoding ReEncodeFont}91
74.7198 /Courier rf /Ff 206[25 49[{TeXBase1Encoding ReEncodeFont}1
49.8132 /Palatino-Roman rf /Fg 107[42 42 24[42 46 43
69 47 50 27 35 33 46 50 45 48 73 24 46 19 24 48 46 28
40 51 37 46 42 7[55 1[83 60 65 51 44 55 65 50 65 69 79
51 2[28 69 63 46 51 64 59 51 65 1[37 4[21 5[42 42 42
42 1[50 21 28 21 1[32 28 28 23 3[42 31[50 50 2[{
TeXBase1Encoding ReEncodeFont}67 83.022 /Palatino-Roman
rf /Fh 134[56 56 1[56 61 33 56 39 61 61 61 61 89 28 2[28
61 61 33 56 61 56 61 56 9[95 2[61 67 1[78 4[61 2[28 1[78
3[73 1[73 1[61 63[{TeXBase1Encoding ReEncodeFont}32 100.457
/Helvetica-Bold rf /Fi 134[46 42 1[46 51 28 37 32 51
51 46 51 74 28 2[28 51 46 32 42 51 37 51 42 1[42 7[83
1[65 55 51 60 69 2[69 1[51 2[32 1[69 1[51 69 60 1[65
1[37 4[21 42 42 1[42 42 42 42 4[21 28 45[{TeXBase1Encoding ReEncodeFont}
47 83.022 /Palatino-Bold rf /Fj 139[37 61 3[68 68 1[31
5[37 61 2[68 61 12[68 5[80 10[80 67[{TeXBase1Encoding ReEncodeFont}12
110.502 /Helvetica-Bold rf /Fk 134[74 2[74 82 45 74 52
82 82 82 82 1[37 2[37 1[82 45 74 1[74 1[74 13[89 1[104
4[82 10[97 6[45 58[{TeXBase1Encoding ReEncodeFont}22
133.707 /Helvetica-Bold rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop Black 0 TeXcolorgray Black Black 424 104 a Fk(trivsql:)37
b(A)g(trivial)h(SQL)f(engine)g(f)m(or)f(y)m(our)h(application)197
308 y Fj(T)-9 b(ab)o(le)30 b(of)g(Contents)p 0 TeXcolorgray
596 455 a Fi(Introduction)p Black Black 12 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
0 TeXcolorgray -1 w(3)p Black 0 TeXcolorgray 596 566
a(About)19 b(the)h(author)p Black Black 10 w(.)p Black
Black -2 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black 0 TeXcolorgray -1 w(3)p
Black 0 TeXcolorgray 596 677 a(An)g(introduction)e(to)j(tdb)p
Black Black 12 w(.)p Black Black -1 w(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black 0 TeXcolorgray
-1 w(3)p Black 0 TeXcolorgray 596 788 a(Why)f(trivsql?)p
Black Black 7 w(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black 0 TeXcolorgray -1 w(3)p
Black 0 TeXcolorgray 596 900 a(Why)g(SQL?)p Black Black
3 w(.)p Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black 0 TeXcolorgray -1 w(4)p
Black 0 TeXcolorgray 596 1011 a(The)g(current)g(state)f(of)i(play)p
Black Black 7 w(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black 0 TeXcolorgray
-1 w(4)p Black 0 TeXcolorgray 596 1122 a(Interface)e(to)h(trivsql)p
Black Black 1 w(.)p Black Black -1 w(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black 0 TeXcolorgray -1 w(5)p Black 0
TeXcolorgray 596 1233 a(An)g(example)e(usage)p Black
Black 10 w(.)p Black Black -2 w(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black 0 TeXcolorgray -1 w(5)p Black 0 TeXcolorgray
596 1345 a(Genstruct)h(as)h(an)g(alternative)p Black
Black 1 w(.)p Black Black -4 w(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black 0 TeXcolorgray -1 w(5)p Black 0
TeXcolorgray 596 1456 a(What)f(is)h(genstruct?)p Black
Black 5 w(.)p Black Black -1 w(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black 0 TeXcolorgray -1 w(6)p Black 0 TeXcolorgray
596 1567 a(The)g(other)g(side)f(of)j(the)d(equation)p
Black Black 15 w(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black 0 TeXcolorgray -1 w(8)p Black 0 TeXcolorgray
596 1678 a(Genstruct)g(pros)h(and)g(cons)p Black Black
14 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black 0 TeXcolorgray -1 w(9)p
Black 0 TeXcolorgray 596 1790 a(Conclusion)p Black Black
17 w(.)p Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black 0 TeXcolorgray
-1 w(9)p Black 0 TeXcolorgray 596 1901 a(Code)g(listings)p
Black Black 12 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black Black -1 w(.)p Black Black(.)p Black
Black(.)p Black Black(.)p Black Black -1 w(.)p Black
Black(.)p Black Black(.)p Black Black(.)p Black Black
-1 w(.)p Black Black(.)p Black Black(.)p Black Black(.)p
Black Black -1 w(.)p Black Black(.)p Black Black(.)p
Black Black(.)p Black Black -1 w(.)p Black Black(.)p
Black Black(.)p Black Black(.)p Black Black -1 w(.)p
Black Black(.)p Black Black(.)p Black Black(.)p Black
Black -1 w(.)p Black Black(.)p Black Black(.)p Black
Black(.)p Black 0 TeXcolorgray -1 w(9)p Black Black Black
eop
%%Page: 2 2
2 1 bop Black 0 TeXcolorgray Black Black Black Black
eop
%%Page: 3 3
3 2 bop Black 0 TeXcolorgray Black Black 197 89 a Fh(Intr)n(oduction)
596 231 y Fi(trivsql)30 b Fg(is)i(a)e(simple)i(SQL)f(engine,)h
(implemented)f(on)h(the)g Fi(tdb)e Fg(database)g(engine.)h(The)h(in-)
596 322 y(tention)e(of)f Fi(trivsql)g Fg(is)h(that)f(it)h(is)g
(embedded)e(into)i(your)g(application,)f(allowing)i(the)e(use)h(of)596
413 y(familiar)20 b(SQL)g(constr)o(ucts)i(for)e(accessing)h(data)f
(stor)o(ed)g(within)i(your)f(application.)596 546 y Fi(trivsql)d
Fg(is)j(licensed)f(under)f(the)h(terms)g(of)g(the)g(GNU)g(GPL,)g(as)g
(is)g(the)g Fi(tdb)f Fg(engine)i(upon)f(which)596 637
y(it)g(depends.)197 956 y Fh(About)29 b(the)g(author)596
1097 y Fg(Michael)h(has)h(been)f(working)i(in)g(the)f(image)f(pr)o
(ocessing)i(\002eld)e(for)h(several)f(years,)g(includ-)596
1188 y(ing)d(a)f(couple)h(of)g(years)f(managing)i(and)e(developing)h
(lar)o(ge)f(image)h(databases)e(for)i(an)f(Aus-)596 1280
y(tralian)16 b(government)h(department.)f(He)g(curr)o(ently)g(works)i
(for)e(T)o(OWER)h(Softwar)o(e,)e(who)i(man-)596 1371
y(ufactur)o(e)28 b(a)h(world)i(leading)e(EDMS)g(and)h(Recor)o(ds)g
(Management)f(package)g(named)g(TRIM.)596 1462 y(Michael)21
b(is)i(also)g(the)g(developer)f(of)g(Panda,)g(an)g(open)h(sour)o(ce)f
(PDF)h(generation)g(API,)f(as)h(well)596 1554 y(as)31
b(being)h(the)g(maintainer)f(of)h(the)f(comp.text.pdf)g(USENET)f(fr)o
(equently)h(asked)g(questions)596 1645 y(document.)596
1778 y(Michael)20 b(has)g(a)h(website)g(at)f(http://www)-8
b(.stillhq.com.)197 2096 y Fh(An)28 b(intr)n(oduction)j(to)d(tdb)596
2237 y Fi(tdb)21 b Fg(is)h(a)g(\(name,)f(value\))g(pair)h(database)e
(similar)j(to)f Fi(gdbm)p Fg(.)f(It)i(was)f(originally)h(implemented)
596 2329 y(for)g(the)i(Samba)d(pr)o(oject,)i(as)g(a)f(way)h(of)g
(avoiding)h(having)f(to)g(implement)h(a)f(lar)o(ge)f(number)h(of)596
2420 y(in)f(memory)g(linked)g(lists)h(for)e(storing)i(usage)e(and)h
(access)f(information.)h(The)g(code)f(for)h Fi(tdb)f
Fg(is)596 2511 y(available)d(fr)o(om)h(the)h(Samba)f(CVS)g(server)-6
b(.)596 2644 y(T)e(o)19 b(quote)g(fr)o(om)g(the)g(Samba)e(sour)o(ce)i
(code:)f(\223This)h(is)g(a)f(simple)i(database)d(API.)h(It)h(was)f
(inspir)o(ed)596 2736 y(by)23 b(the)h(r)o(ealisation)g(that)f(in)i
(Samba)d(we)i(have)f(several)g(ad-hoc)g(bits)h(of)g(code)g(that)f
(essentially)596 2827 y(implement)g(small)h(databases)d(for)i(sharing)g
(str)o(uctur)o(es)g(between)f(parts)h(of)g(Samba.)e(As)i(I)g(was)596
2918 y(about)33 b(to)g(add)f(another)i(I)f(r)o(ealised)e(that)j(a)e
(generic)h(database)f(module)h(was)g(called)g(for)g(to)596
3010 y(r)o(eplace)20 b(all)i(the)g(ad-hoc)f(bits.)h(I)g(based)f(the)h
(interface)f(on)i(gdbm.)f(I)g(couldn't)g(use)g(gdbm)g(as)g(we)596
3101 y(need)e(to)h(be)f(able)h(to)g(have)f(multiple)h(writers)g(to)g
(the)g(databases)e(at)i(one)g(time.\224)596 3234 y(T)-8
b(o)21 b(make)f(use)h(of)g(a)f Fi(tdb)g Fg(database)f(at)h(the)h(most)h
(trivial)e(level,)h(you)g(open)g(the)g(database)e(with)i(a)596
3325 y Fi(tdb_open)i Fg(function)j(call,)f(you)h(can)f(then)h(add)e
(pairs)h(to)h(the)f(database)f(using)i(the)g Fi(tdb_store)596
3416 y Fg(function,)39 b(and)f(r)o(etrieve)g(pairs)g(fr)o(om)g(the)h
(database)e(with)j(the)f Fi(tdb_fetch)e Fg(function.)i(The)596
3508 y(database)18 b(is)k(closed)e(when)i(you)f(ar)o(e)e(\002nished)j
(with)f(the)g(via)g(the)g Fi(tdb_close)d Fg(function.)3436
3474 y Ff(1)197 3826 y Fh(Wh)n(y)28 b(trivsql?)596 3967
y Fg(The)g(functionality)i(of)o(fer)o(ed)d(by)i Fi(tdb)f
Fg(is)h(satisfactory)f(for)h(simple)g(databases)e(wher)o(e)i(all)f(you)
596 4059 y(want)22 b(to)h(stor)o(e)f(is)g(small)h(nuggets)g(of)f(data.)
f(For)i(instance,)f(when)h(you)g(want)f(to)h(stor)o(e)f(that)g(the)596
4150 y(user)e(Daniel)h(is)g(logged)g(on,)g(then)h(a)e(piece)g(of)h
(code)f(such)h(as:)685 4315 y Fe(TDB_CONTEXT)43 b(db;)685
4397 y(TDB_DATA)h(dbkey,)f(dbdata;)685 4562 y(//)i(Open)f(the)g
(database)685 4644 y(document->db)f(=)i(tdb_open)e(\("foo.tdb",)g(0,)
1806 4726 y(TDB_CLEAR_IF_FIRST,)f(O_RDWR)h(|)i(O_CREAT)f(|)g(O_TRUNC,)
1806 4808 y(0600\);)685 4973 y(//)h(Store)f(the)g(value)685
5055 y(dbkey.dptr)f(=)i("Daniel";)685 5137 y(dbkey.dsize)e(=)i(strlen)f
(\(key\))g(+)g(1;)685 5219 y(dbdata.dptr)f(=)i("LoggedOn";)685
5301 y(dbdata.dsize)e(=)i(strlen)e(\(value\))h(+)h(1;)685
5466 y(if)g(\(tdb_store)e(\(db,)h(dbkey,)g(dbdata,)f(TDB_REPLACE\))g
(!=)i(0\))p Black 3642 5585 a Fd(3)p Black eop
%%Page: 4 4
4 3 bop Black 0 TeXcolorgray Black 197 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 775 89 a Fe({)865 171 y(fprintf\(stderr,)42 b("Could)i(not)g
(store)g(value"\);)775 253 y(})596 428 y Fg(And)20 b(to)h(r)o(etrieve)e
(the)i(value:)685 593 y Fe(TDB_CONTEXT)43 b(db;)685 675
y(TDB_DATA)h(dbkey,)f(dbdata;)685 840 y(//)i(Open)f(the)g(database)685
922 y(document->db)f(=)i(tdb_open)e(\("foo.tdb",)g(0,)1806
1004 y(TDB_CLEAR_IF_FIRST,)f(O_RDWR)h(|)i(O_CREAT)f(|)g(O_TRUNC,)1806
1086 y(0600\);)685 1251 y(//)h(Fetch)f(the)g(value)685
1333 y(dbkey.dptr)f(=)i("Daniel";)685 1415 y(dbkey.dsize)e(=)i(strlen)f
(\(key\))g(+)g(1;)685 1579 y(dbdata)g(=)h(tdb_fetch)e(\(document->db,)f
(dbkey\);)596 1754 y Fg(This)31 b(doesn't)g(work)h(so)f(well)g(when)h
(the)f(data)e(you)j(want)e(to)i(stor)o(e)e(is)h(mor)o(e)g(complex.)g
(For)596 1845 y(example,)21 b(let's)i(imagine)f(that)h(we)f(want)h(to)f
(stor)o(e)g(some)h(mor)o(e)f(information)i(about)e(Daniel)h(--)596
1936 y(for)e(instance)g(how)i(many)e(bytes)h(he)f(has)h(transfer)o(ed)d
(this)k(session)f(and)f(a)g(list)h(of)g(his)g(favourite)596
2028 y(users.)e(I)h(can)f(think)i(of)f(four)f(ways)h(that)g(we)g(can)f
(stor)o(e)h(this)g(information)h(in)f(a)f Fi(tdb)g Fg(database:)p
Black 712 2368 a(1.)p Black 20 w(W)-8 b(e)38 b(can)g(de\002ne)h(a)f
(str)o(uctur)o(e)f(that)i(contains)g(these)f(elements,)h(and)f(then)h
(stor)o(e)f(the)795 2459 y(pointer)c(to)g(this)g(str)o(uctur)o(e)f(in)i
(the)e Fi(tdb)p Fg(.)g(The)h(pr)o(oblem)f(with)h(this)h(is)f(that)g(it)
f(doesn't)795 2551 y(persist)f(acr)o(oss)h(r)o(estarts)e(of)i(the)f(pr)
o(ogram,)g(because)g(the)h(pointer)f(will)i(no)f(longer)g(be)795
2642 y(valid.)p Black 712 2775 a(2.)p Black 20 w(W)-8
b(e)26 b(can)f(use)h(a)g(series)g(of)g(inter)o(estingly)g(named)g
(keys,)g(each)f(storing)i(a)e(piece)h(of)g(infor)o(-)795
2866 y(mation.)21 b(For)g(example:)p Black 911 2999 a(a.)p
Black 20 w(daniel-bytestransfer)o(ed)p Black 907 3132
a(b.)p Black 20 w(daniel-friends)p Black 916 3265 a(c.)p
Black 20 w(et)g(cetera)795 3398 y(The)30 b(pr)o(oblem)f(with)i(this)g
(is)f(that)g(it)h(pr)o(oduces)e(horribly)i(verbose)e(code,)h(because)f
(the)795 3489 y(code)20 b(to)h(r)o(ead)e(a)i(single)g(key)g(is)g(r)o
(epeated)e(all)h(over)h(the)g(place.)p Black 712 3622
a(3.)p Black 20 w(W)-8 b(e)23 b(can)f(push)i(all)f(the)g(information)h
(into)f(one)h(string,)f(and)g(then)g(stor)o(e)g(that)g(in)g(the)g
Fi(tdb)p Fg(,)795 3713 y(but)d(this)g(means)g(that)g(we)g(have)f(to)i
(handle)e(parsing)h(the)g(information)h(again)f(when)g(you)795
3804 y(need)26 b(it)g(back.)g(Since)g(writing)h Fi(trivsql)e
Fg(the)i(Samba)e(team)h(has)g(dealt)f(with)j(exactly)d(this)795
3896 y(pr)o(oblem)h(in)i(this)f(manner)-6 b(.)27 b(T)-8
b(o)27 b(ease)f(the)h(implementation,)h(Dr)f(Andr)o(ew)f(T)-7
b(ridgell)26 b(has)795 3987 y(written)h Fi(genstruct)p
Fg(,)e(which)j(takes)e(c)h(str)o(uctur)o(es)g(\(including)g(pointers\))
g(and)g(serializes)795 4078 y(them)21 b(into)h(strings.)f
Fi(genstruct)e Fg(is)i(available)f(fr)o(om)g(http://www)-8
b(.samba.or)o(g.)p Black 712 4211 a(4.)p Black 20 w(Y)g(ou)25
b(can)e(use)h Fi(trivsql)p Fg(,)f(which)i(looks)g(after)e(all)g(the)i
(ugliness)f(for)g(you,)g(and)g(allows)g(you)795 4302
y(to)d(perform)g(select)g(and)g(insert)g(statements)g(in)h(a)f(manner)g
(familiar)f(to)i(many)f(pr)o(ogram-)795 4394 y(mers.)197
4845 y Fh(Wh)n(y)28 b(SQL?)596 4986 y Fg(SQL)e(was)h(selected)f(as)h(a)
f(logical)h(layer)g(over)f Fi(tdb)g Fg(because)g(ther)o(e)h(ar)o(e)e
(many)i(developers)f(in)596 5078 y(the)c(world)i(which)f(ar)o(e)f(alr)o
(eady)f(familiar)h(with)h(it.)g(It)g(is)g(also)g(r)o(elatively)f
(simple)h(to)g(parse)f(and)596 5169 y(pr)o(ocess)e(the)h(commands.)596
5302 y(Later)c(in)j(this)f(article)g(I)f(will)i(discuss)f(some)h(of)f
(the)g(techniques)h(I)f(have)f(used)h(to)g(parse)f(the)h(SQL)596
5393 y(commands)i(pr)o(esented)e(to)j Fi(trivsql)p Fg(.)p
Black 197 5585 a Fd(4)p Black eop
%%Page: 5 5
5 4 bop Black 0 TeXcolorgray Black 2034 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 197 89 a Fh(The)29 b(current)g(state)f(of)h(pla)n(y)596
231 y Fg(...)197 549 y Fh(Interface)g(to)f(trivsql)596
690 y Fg(...)197 1008 y Fh(An)g(e)n(xample)g(usa)o(g)q(e)596
1150 y Fi(trivsql)22 b Fg(is)h(r)o(eally)g(easy)f(to)i(use.)f(The)g
(code)g(snippet)h(below)f(is)h(fr)o(om)f(the)g Fi(trivsql)f
Fg(distribution.)596 1241 y(It)k(simply)i(r)o(eads)d(commands)i(fr)o
(om)f(standar)o(d)f(input,)i(and)f(executes)g(them)h(with)g
Fi(trivsql)p Fg(.)e(If)596 1333 y(the)h(command)g(r)o(eturned)f(a)g(r)o
(ecor)o(dset)f(\(which)j(is)f(how)h(all)f(data)f(is)h(r)o(eturned)f(to)
h(the)g(caller\),)596 1424 y(then)21 b(the)g(r)o(ecor)o(dset)e(is)i
(displayed.)596 1589 y Fe(#include)43 b Fc(<)p Fe(stdio.h)p
Fc(>)596 1671 y Fe(#include)g("trivsql.h")596 1836 y(int)h(main\(int)f
(argc,)h(char)g(*argv[]\){)685 1918 y(trivsql_state)f(*ourState;)685
2000 y(trivsql_recordset)f(*rs;)685 2082 y(char)i(cmd[1000];)685
2247 y(if\(argc)g(!=)g(2\){)775 2329 y(fprintf\(stderr,)e("Please)i
(specify)f(a)i(db)g(file\\n"\);)775 2411 y(exit\(42\);)685
2493 y(})685 2658 y(ourState)f(=)g(trivsql_opendb\(argv[1]\);)685
2740 y(if\(trivsql_initok\(ourState\))c(!=)45 b(TRIVSQL_TRUE\){)775
2822 y(fprintf\(stderr,)d("Database)h(open)i(failed\\n"\);)775
2904 y(exit\(42\);)685 2986 y(})685 3151 y(while\(fgets\(cmd,)d(1000,)i
(stdin\))g(!=)h(NULL\){)775 3233 y(rs)f(=)h(trivsql_execute\(ourState,)
c(cmd\);)775 3315 y(if\(rs)j(!=)g(NULL\))g(trivsql_displayrs\(rs\);)775
3397 y(else)g(printf\("NULL)f(recordset\\n"\);)775 3479
y(trivsql_xfree\(rs\);)685 3562 y(})596 3644 y(})596
3818 y Fd(Code:)20 b(/home/mikal/opensour)o(ce/trivsql/example.c)596
4070 y Fb(Input)596 4207 y Fg(The)g(following)j(input:)596
4372 y Fe(CREATE)43 b(TABLE)h(newtable)g(\(cola,)g(colb,)g(colc\);)596
4455 y(SELECT)f(*)i(FROM)f(newtable;)596 4537 y(INSERT)f(INTO)h
(newtable)g(\(cola,)g(colc\))g(VALUES)g(\('123',)f('banana'\);)596
4619 y(SELECT)g(*)i(FROM)f(newtable;)596 4701 y(SELECT)f(*)i(FROM)f
(newtable)g(WHERE)g(cola)g(=)g('123';)596 4875 y Fd(Code:)20
b(/home/mikal/opensour)o(ce/trivsql/example.sql)596 5008
y Fg(Pr)o(oduces)g(the)h(following)h(output:)p Black
3642 5585 a Fd(5)p Black eop
%%Page: 6 6
6 5 bop Black 0 TeXcolorgray Black 197 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 197 89 a Fh(Genstruct)29 b(as)f(an)g(alternative)596
231 y Fg(Given)e(that)h(the)f(Samba)g(team)g(chose)h(to)g(use)f
Fi(genstruct)f Fg(to)i(solve)g(this)g(same)f(pr)o(oblem,)g(it)h(is)596
322 y(worthwhile)22 b(to)f(brie\003y)g(discuss)g(their)g(solution.)197
640 y Fh(What)28 b(is)g(g)q(enstruct?)596 782 y Fi(genstruct)d
Fg(is)j(very)f(similar)h(in)g(some)g(r)o(espects)f(to)h(the)f(perl)g
Fi(Data::Dumper)p Fg(.)e(It)j(is)g(ther)o(efor)o(e)596
873 y(useful)c(to)h(pr)o(ovide)f(a)h(brief)f(intr)o(oduction)h(to)g
(that)g(functionality)h(befor)o(e)d(moving)j(onto)g Fi(gen-)596
964 y(struct)p Fg(.)596 1216 y Fb(P)m(erl')-5 b(s)24
b(Data::Dumper)i(in)f(a)g(n)o(utshell)596 1353 y Fg(Perl's)20
b Fi(Data::Dumper)f Fg(is)i(quite)g(simple)g(to)h(use:)596
1486 y(Which)f(pr)o(oduces...)596 1651 y Fe($VAR1)44
b(=)g([)1044 1733 y('foo',)1044 1816 y('bar')954 1898
y(];)596 1980 y($VAR2)g(=)g({)1044 2062 y('walter')f(=>)i('wibble',)
1044 2144 y('carl')f(=>)g('chicken',)1044 2227 y('bob')g(=>)g('banana')
954 2309 y(};)596 2391 y($VAR3)g(=)g(42;)596 2740 y Fb(Genstruct)596
2877 y Fi(genstruct)21 b Fg(is)i(a)f(perl)g(pr)o(ogram)g(which)i(is)f
(r)o(un)g(at)f(compile)h(time.)g(It)g(parses)f(the)h(c)f(header)g
(\002les)596 2969 y(for)29 b(the)i(pr)o(ogram)e(you)i(want)f(to)h(use)f
Fi(genstruct)f Fg(with,)i(using)g(tags)f(that)g(you)h(have)f(to)g(em-)
596 3060 y(bed)24 b(into)j(the)e(header)g(\002le.)g(For)h(example,)e
(the)i(sample)f(which)h(comes)g(with)h Fi(genstruct)c
Fg(is)j(as)596 3151 y(follows:)596 3317 y Fe(GENSTRUCT)43
b(enum)h(fruit)g({APPLE,)g(ORANGE=2,)f(PEAR,)954 3399
y(RASBERRY,)g(PEACH};)596 3563 y(GENSTRUCT)596 3645 y(struct)g(test2)
596 3728 y({)640 3810 y(int)i(x1;)640 3892 y(char)g(*foo;)640
3974 y(char)g(fstring[20];)d(_NULLTERM)640 4056 y(int)j(dlen;)640
4139 y(char)g(*dfoo;)e(_LEN\(dlen\))640 4221 y(enum)i(fruit)e(fvalue;)
640 4303 y(struct)h(test2)g(*next;)596 4385 y(};)596
4550 y(GENSTRUCT)f(struct)h(test1)g({)640 4632 y(char)h(foo[100];)640
4714 y(char)g(*foo2[20];)640 4796 y(int)g(xlen;)640 4878
y(int)g(*iarray;)e(_LEN\(xlen\);)640 4960 y(unsigned)h(slen;)640
5043 y(char)h(**strings;)e(_LEN\(slen\);)640 5125 y(char)i(*s2[5];)640
5207 y(double)f(d1,)g(d2,)h(d3;)640 5289 y(struct)f(test2)g(*test2;)640
5371 y(int)h(alen;)640 5454 y(struct)f(test2)g(*test2_array;)f
(_LEN\(alen\);)p Black 197 5585 a Fd(6)p Black eop
%%Page: 7 7
7 6 bop Black 0 TeXcolorgray Black 2034 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 640 89 a Fe(struct)44 b(test2)g(*test2_fixed[2];)640
171 y(int)h(plen;)640 253 y(struct)f(test2)g(**test2_parray;)e
(_LEN\(plen\))596 336 y(};)596 510 y Fd(Code:)20 b
(../short-genstruct/article.sgml)596 643 y Fg(In)31 b(this)h(example)f
(you)h(can)f(see)g(that)g(str)o(uctur)o(es)h(which)g(should)g(have)f
Fi(genstruct)f Fg(enabled)596 734 y(have)k(the)i Fi(GENSTRUCT)f
Fg(attribute)f(associated)h(with)h(them,)f(you)h(ar)o(e)e(ther)o(efor)o
(e)f(not)j(r)o(e-)596 825 y(quir)o(ed)27 b(to)i(have)f(all)h(of)f(the)h
(data)e(str)o(uctur)o(es)h(in)h(your)g(code)f(exportable.)f
Fi(GENSTRUCT)i Fg(is)596 917 y(mer)o(ely)20 b(an)g(empty)h(#de\002ne,)f
(which)i(the)f Fi(genstruct)e Fg(header)g(\002le)i(parser)f(can)h(sear)
o(ch)e(for)-6 b(.)596 1050 y(T)e(o)21 b(cr)o(eate)e(a)h(string)i(r)o
(epr)o(esentation)d(of)i(a)f(data)g(str)o(uctur)o(e,)g(simply:)596
1215 y Fe(char)44 b(*s;)596 1297 y(struct)f(test1)h(t;)596
1461 y(//)g(...)g(we)h(need)f(to)g(populate)g(t)h(with)f(data)g(here)g
(...)596 1626 y(s)g(=)h(gen_dump\(pinfo_test1,)c(\(char)j(*\))h(&t,)f
(0\);)596 1800 y Fg(In)19 b(this)i(code,)e(we)g(de\002ne)h(a)f(str)o
(uctur)o(e,)g(\002ll)h(it)g(with)g(data,)e(and)h(then)i(use)e(the)h
Fi(gen_dump)d Fg(func-)596 1891 y(tion)25 b(to)g(cr)o(eate)d(a)i
(string)i(r)o(epr)o(esentation)d(of)h(that)h(str)o(uctur)o(e.)f(The)g
(ar)o(guments)g(to)h Fi(gen_dump)596 1983 y Fg(ar)o(e:)596
2148 y Fe(char)44 b(*gen_dump\(const)e(struct)i(parse_struct)f(*pinfo,)
1268 2230 y(const)h(char)g(*data,)1268 2312 y(unsigned)f(indent\);)p
Black 596 2653 a Fa(\225)p Black 43 w Fd(const)30 b(struct)h
(parse_struct)g(*pinfo)p Fg(:)g(is)h(generated)e(at)g(compile)i(time)f
(by)h Fi(genstruct)p Fg(,)d(and)i(is)679 2744 y(located)20
b(in)h(the)g(output)g(to)g(that)g(command.)p Black 596
2877 a Fa(\225)p Black 43 w Fd(const)i(char)g(*data)p
Fg(:)g(is)h(the)f(data)g(to)h(dump)g(to)g(the)f(string)i(r)o(epr)o
(esentation)d(\(simply)i(cast)g(your)679 2968 y(str)o(uctur)o(e)c(to)h
(a)f(char)g(*)i(befor)o(e)d(passing)i(it.)p Black 596
3101 a Fa(\225)p Black 43 w Fd(unsigned)f(indent)p Fg(:)h(is)g(the)g
(starting)g(indent)g(for)g(ease)f(of)g(r)o(ecursive)g(calling.)h(Set)f
(it)h(to)g(zer)o(o.)p Black 596 3234 a Fa(\225)p Black
43 w Fi(Returns)p Fg(:)e(a)h(string)h(r)o(epr)o(esentation)f(of)h(the)g
(str)o(uctur)o(e.)596 3500 y(The)26 b(most)i(inter)o(esting)f(thing)g
(her)o(e)f(is)h(the)g Fd(pinfo)f Fg(str)o(uctur)o(e)g(which)i(is)f(the)
g(\002rst)f(ar)o(gument)h(to)596 3591 y(this)21 b Fi(gen_dump)e
Fg(function.)i(The)g Fd(pinfo_test1)e Fg(in)i(this)h(example)e(looks)i
(like:)596 3756 y Fe(static)43 b(const)h(struct)g(parse_struct)f
(pinfo_test1[])g(=)h({)596 3838 y({"foo",)f(0,)i(sizeof\(char\),)d
(offsetof\(struct)h(test1,)g(foo\),)h(100,)h(NULL,)685
3921 y(0,)g(gen_dump_char,)d(gen_parse_char},)596 4003
y({"foo2",)h(1,)h(sizeof\(char\),)f(offsetof\(struct)f(test1,)i
(foo2\),)g(20,)g(NULL,)685 4085 y(0,)h(gen_dump_char,)d
(gen_parse_char},)596 4167 y({"xlen",)h(0,)h(sizeof\(int\),)f
(offsetof\(struct)g(test1,)g(xlen\),)h(0,)h(NULL,)685
4249 y(0,)g(gen_dump_int,)d(gen_parse_int},)596 4332
y({"iarray",)h(1,)h(sizeof\(int\),)f(offsetof\(struct)f(test1,)i
(iarray\),)g(0,)685 4414 y("xlen",)g(0,)g(gen_dump_int,)f
(gen_parse_int},)596 4496 y(//)h(...)g(and)h(so)f(on)h(...)596
4578 y({NULL,)e(0,)i(0,)f(0,)h(0,)f(NULL,)g(0,)h(NULL,)f(NULL}};)596
4752 y Fg(This)34 b(table)f(might)h(seem)g(a)f(bit)h(daunting)f(at)h
(\002rst,)f(but)h(r)o(eaders)d(need)j(to)f(r)o(emember)g(that)596
4844 y(they'r)o(e)27 b(not)i(expected)e(to)i(be)e(able)h(to)h(r)o(ead,)
d(generate,)h(or)h(use)g(these)h(tables.)e(They)i(ar)o(e)d(cr)o(e-)596
4935 y(ated)19 b(solely)j(for)e(the)h(use)g(of)g Fi(genstruct)p
Fg(.)596 5068 y(The)f(output)h(of)g(the)g Fi(gen_dump)e
Fg(function)i(call)g(will)g(be)g(something)h(like:)596
5233 y Fe(foo)44 b(=)h({hello)e(foo})596 5315 y(foo2)h(=)g(1:{foo2)g
(\\7d)g(you},)g(2:{foo2)g(you)g(2})596 5398 y(xlen)g(=)g(6)596
5480 y(iarray)f(=)i(0:9,)f(1:4,)g(2:3,)g(3:9,)h(4:7)p
Black 3642 5585 a Fd(7)p Black eop
%%Page: 8 8
8 7 bop Black 0 TeXcolorgray Black 197 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 596 89 a Fe(slen)44 b(=)g(3)596 171 y(strings)f(=)i(0:{test)e
(string)h(48},)g(1:{test)g(string)g(69},)g(2:{test)g(string)g(36})596
253 y(s2)g(=)h(2:{t2)f(string)f(0},)i(3:{t2)f(string)g(74})596
336 y(d1)g(=)h(3.5)596 418 y(d3)f(=)h(-7)596 500 y(test2)f(=)g({)954
582 y(x1)h(=)f(4)954 664 y(foo)g(=)h({hello)f(\\7b)g(there})954
747 y(fstring)g(=)g({blah)g(1})954 829 y(dlen)g(=)h(12)954
911 y(dfoo)f(=)h({q\\a9\\08z\\faO\\ca\\e3\\1d\\b2M\\88})954
993 y(fvalue)f(=)h(APPLE)954 1075 y(next)f(=)h({)1313
1158 y(x1)f(=)h(5)1313 1240 y(foo)f(=)h({hello)f(\\7b)g(there})1313
1322 y(fstring)f(=)i({blah)f(1})1313 1404 y(dlen)g(=)h(28)1313
1486 y(dfoo)f(=)h({\\e8\\8f\\dc\\1c\\0e\\c7\)'\\ea\\da\\07e\\ca\\04)o
(2\\ce\\0)o(78?\\b0)o(@\\ba\\a)o(b\\90\\8)o(4\\8e\\a)o(d6})1313
1569 y(fvalue)f(=)g(APPLE)1313 1651 y(next)g(=)h({)1671
1733 y(x1)g(=)g(6)1671 1815 y(foo)g(=)f({hello)g(\\7b)h(there})1671
1897 y(fstring)f(=)h({blah)f(1})1671 1979 y(dlen)h(=)f(27)1671
2062 y(dfoo)h(=)f({5r\\c3\\c4O\\e0\\d2\\16)266 b
(\\f9\\01\\e3\\01f\\ad\\05\\98\\7b^L\\d0\\bb\\bd\\11u)o(h\\a1\\f)o(9})
1671 2144 y(fvalue)44 b(=)h(APPLE)1671 2226 y(next)g(=)f({)2030
2308 y(x1)h(=)f(7)2030 2390 y(foo)g(=)h({hello)f(\\7b)g(there})2030
2473 y(fstring)g(=)g({blah)g(1})2030 2555 y(dlen)g(=)h(14)2030
2637 y(dfoo)f(=)h({N/\\d1\\83\\a2\\94G\\f1t\\1a\\07\\7d\\13\\08})2030
2719 y(fvalue)f(=)h(APPLE)1671 2801 y(})1313 2884 y(})954
2966 y(})596 3048 y(})596 3222 y Fg(This)21 b(string)g(r)o(epr)o
(esentation)f(can)g(then)h(be)g(stor)o(ed)f(for)h(later)f(use.)197
3623 y Fh(The)29 b(other)g(side)f(of)g(the)h(equation)596
3765 y Fg(The)24 b(only)h(r)o(eason)f(you)g(would)h(use)f(a)g(package)f
(such)i(as)f Fi(Data::Dumper)e Fg(or)i Fi(genstruct)f
Fg(is)h(so)596 3856 y(that)19 b(you)h(can)g(r)o(ead)e(the)h
(information)i(back)e(in)h(later)-6 b(.)19 b(This)h(is)g(done)f(with)i
(the)f Fi(eval)e Fg(function)i(in)596 3948 y(perl.)e
Fi(genstruct)p Fg('s)f(equivalent)i(is)g Fi(gen_parse)p
Fg(,)d(which)k(takes)e(your)h(string)h(r)o(epr)o(esentation)d(and)596
4039 y(r)o(ecr)o(eates)h(the)j(data)e(str)o(uctur)o(es)i(as)f(stor)o
(ed.)g(The)h(ar)o(guments)f(to)h Fi(gen_parse)e Fg(ar)o(e:)596
4204 y Fe(int)44 b(gen_parse\(const)e(struct)i(parse_struct)f(*pinfo,)
1223 4286 y(char)h(*data,)1223 4369 y(const)g(char)g(*str0\);)p
Black 596 4709 a Fa(\225)p Black 43 w Fd(const)33 b(struct)h
(parse_struct)g(*pinfo)p Fg(:)g(is)g(the)g(same)g(parse)f(str)o(uctur)o
(e)h(that)g(was)g(used)f(in)i(the)679 4800 y Fi(gen_dump)18
b Fg(call.)p Black 596 4933 a Fa(\225)p Black 43 w Fd(char)24
b(*data)p Fg(:)g(is)h(a)f(pointer)i(to)f(the)g(location)h(that)e(the)i
(str)o(uctur)o(e)e(should)i(be)e(cr)o(eated)f(at.)h(This)679
5024 y(memory)d(should)h(alr)o(eady)c(have)j(been)f(allocated)g(\(for)g
(the)h(main)g(str)o(uctur)o(e\).)p Black 596 5157 a Fa(\225)p
Black 43 w Fd(const)f(char)g(*str0)p Fg(:)h(the)g(string)g(r)o(epr)o
(esentation)f(to)h(use.)p Black 596 5290 a Fa(\225)p
Black 43 w Fi(Returns)p Fg(:)e(non)i(zer)o(o)f(if)h(ther)o(e)f(was)g
(an)h(err)o(or)-6 b(.)596 5423 y(A)20 b(sample)g(usage)h(is:)p
Black 197 5585 a Fd(8)p Black eop
%%Page: 9 9
9 8 bop Black 0 TeXcolorgray Black 2034 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 596 89 a Fe(char)44 b(*s;)596 171 y(struct)f(test1)h(t1,)h(t2;)
596 336 y(//)f(...)g(we)h(need)f(to)g(populate)g(t1)g(with)h(data)f
(here)g(...)596 500 y(s)g(=)h(gen_dump\(pinfo_test1,)c(\(char)j(*\))h
(&t1,)f(0\);)596 582 y(memset\(&t2,)e(0,)j(sizeof\(t2\)\);)596
747 y(if\(gen_parse\(pinfo_test1,)40 b(\(char)k(*\))h(&t2,)f(s\))g(!=)h
(0\){)685 829 y(printf\("Parse)e(failed!\\n"\);)685 911
y(exit\(1\);)685 993 y(})197 1353 y Fh(Genstruct)29 b(pr)n(os)g(and)g
(cons)596 1494 y Fg(Advantages)19 b(of)i(the)g(Samba)e(solution)k(to)e
(this)g(pr)o(oblem)g(ar)o(e:)p Black 712 1710 a(1.)p
Black 20 w(Fewer)f(database)f(accesses)p Black 712 1843
a(2.)p Black 20 w(MORE?)596 1976 y(However)-6 b(,)20
b(the)h(disadvantages)e(of)i(this)g(solution)i(ar)o(e:)p
Black 712 2192 a(1.)p Black 20 w(Requiring)f(pr)o(e)e(pr)o(ocessing)h
(of)f(sour)o(ce)h(code)f(with)i(a)e(perl)g(script)p Black
712 2325 a(2.)p Black 20 w(The)h(computational)g(ef)o(fort)e(expended)h
(in)h(data)f(serialization)p Black 712 2457 a(3.)p Black
20 w(MORE?)197 2775 y Fh(Conc)n(lusion)596 2917 y Fg(This)28
b(paper)g(has)g(described)f Fi(trivsql)p Fg(,)g(a)h(SQL)g(engine)h
(which)g(can)f(be)g(embedded)f(into)j(your)596 3008 y(code.)25
b(This)i(code)f(is)g(still)h(a)f(work)g(in)h(pr)o(ogr)o(ess,)e(and)h
(updates)f(on)i(it's)f(development)g(can)g(be)596 3100
y(found)20 b(at)h(http://www)-8 b(.stillhq.com)197 3418
y Fh(Code)28 b(listings)596 3559 y Fg(All)20 b(the)h(code)g(included)f
(her)o(e)g(is)h(available)e(for)i(download)g(fr)o(om)f(http://www)-8
b(.stillhq.com.)596 3811 y Fb(SQL)25 b(le)o(x)o(er)596
3948 y Fg(The)20 b(lexer)g(for)h(my)g(SQL)f(implementation)i(is:)596
4113 y Fe(\045{)596 4278 y(#include)43 b("parser.h")596
4442 y(#undef)g(YY_INPUT)596 4524 y(#define)g(YY_INPUT\(b,)g(r,)i(ms\))
f(\(r)g(=)h(trivsql_gettext\(b,)d(ms\)\))596 4607 y(\045})596
4771 y(\045\045)596 4935 y([Ss][Ee][Ll][Ee][Cc][Tt])847
b({)45 b(return)f(SELECT;)f(})596 5018 y([Cc][Rr][Ee][Aa][Tt][Ee])847
b({)45 b(return)f(CREATE;)f(})596 5100 y([Ii][Nn][Ss][Ee][Rr][Tt])847
b({)45 b(return)f(INSERT;)f(})596 5182 y([Vv][Aa][Ll][Uu][Ee][Ss])847
b({)45 b(return)f(VALUES;)f(})596 5264 y([Ii][Nn][Tt][Oo])1207
b({)45 b(return)f(INTO;)g(})596 5346 y([Tt][Aa][Bb][Ll][Ee])1027
b({)45 b(return)f(TABLE;)g(})596 5428 y([Ff][Rr][Oo][Mm])1207
b({)45 b(return)f(FROM;)g(})p Black 3642 5585 a Fd(9)p
Black eop
%%Page: 10 10
10 9 bop Black 0 TeXcolorgray Black 197 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 596 89 a Fe([Ww][Hh][Ee][Rr][Ee])1027 b({)45 b(return)f(WHERE;)g
(})596 171 y([Ll][Ii][Kk][Ee])1207 b({)45 b(return)f(LIKE;)g(})596
253 y([Aa][Ll][Tt][Ee][Rr])1027 b({)45 b(return)f(ALTER;)g(})596
336 y([Aa][Dd][Dd])1387 b({)45 b(return)f(ADD;)g(})596
418 y([Cc][Oo][Ll][Uu][Mm][Nn])847 b({)45 b(return)f(COLUMN;)f(})596
500 y([Uu][Pp][Dd][Aa][Tt][Ee])847 b({)45 b(return)f(UPDATE;)f(})596
582 y([Ss][Ee][Tt])1387 b({)45 b(return)f(SET;)g(})596
664 y([Aa][Nn][Dd])1387 b({)45 b(return)f(AND;)g(})596
747 y([Oo][Rr])1567 b({)45 b(return)f(OR;)g(})596 911
y([a-zA-Z0-9\045\\-]+)1252 b({)45 b(yylval)f(=)g
(trivsql_xsnprintf\("\045s",)d(yy-)596 993 y(text\);)i(return)h
(STRING;)g(})596 1075 y([)g(\\t\\r\\n])1523 b({)45 b(})596
1158 y(.)1882 b({)45 b(return)f(yytext[0];)f(})596 1322
y(\045\045)596 1496 y Fd(Code:)20 b(/home/mikal/opensour)o
(ce/trivsql/lexer)-6 b(.l)596 1629 y Fg(I)22 b(am)h(not)g(completely)h
(happy)e(with)i(this)g(implementation.)f(My)g(main)g(objection)h(is)f
(the)g(way)596 1720 y(I)d(have)h(implemented)g(case)f(insensitivity)-9
b(,)22 b(although)f(I)g(am)g(not)g(awar)o(e)e(of)i(a)f(better)g
(method.)596 2028 y Fb(SQL)25 b(grammar)596 2165 y Fg(The)20
b(grammar)g(for)h(my)g(SQL)f(implementation)i(is:)596
2331 y Fe(\045{)685 2495 y(#include)44 b Fc(<)p Fe(stdio.h)p
Fc(>)685 2577 y Fe(#include)g("trivsql.h")685 2742 y(#define)g
(YYERROR_VERBOSE)e(1)685 2906 y(trivsql_state)h(*gState;)596
2988 y(\045})596 3153 y(\045token)g(CREATE)h(TABLE)596
3235 y(\045token)f(INSERT)h(VALUES)g(INTO)596 3317 y(\045token)f
(SELECT)h(FROM)g(STRING)g(WHERE)g(LIKE)596 3399 y(\045token)f(ALTER)h
(ADD)h(COLUMN)596 3481 y(\045token)e(UPDATE)h(SET)596
3564 y(\045token)f(AND)i(OR)596 3728 y(\045\045)596 3892
y(sql)268 b(:)45 b(create)e(sql)i(|)f(insert)g(sql)h(|)f(sel)h(sql)f(|)
h(alt)f(sql)g(|)h(upd)f(sql)999 3975 y(|)999 4057 y(;)596
4385 y(create)133 b(:)45 b(CREATE)e(TABLE)h(STRING)g('\(')h(colvalspec)
e('\)')h(';')596 4468 y({)g(gState-)p Fc(>)p Fe(rs)f(=)i
(trivsql_makers\(\(char)c(*\))k($3\);)f(trivsql_docreate\(\(char)d(*\))
k($3,)f(\(char)g(*\))g($5\);)h(})999 4550 y(;)596 4714
y(insert)133 b(:)45 b(INSERT)e(INTO)i(STRING)e('\(')i(colvalspec)e
('\)')h(VALUES)g('\(')g(colvalspec)g('\)')g(';')596 4796
y({)g(gState-)p Fc(>)p Fe(rs)f(=)i(trivsql_makers\(\(char)c(*\))k
($3\);)f(trivsql_checktable\(\(char)d(*\))j($3,)h(gState-)596
4879 y Fc(>)p Fe(rs\);)e(if\(gState-)p Fc(>)p Fe(rs-)p
Fc(>)p Fe(errno)f(==)i(TRIVSQL_FALSE\){trivsql_doinsert\(\(char)39
b(*\))44 b($3,)h(\(char)f(*\))g($5,)g(\(char)g(*\))h($9\);}})999
4961 y(;)596 5125 y(sel)268 b(:)45 b(SELECT)e(cvsaster)h(FROM)g(STRING)
g({)h(gState-)p Fc(>)p Fe(rs)e(=)h(trivsql_makers\(\(char)e(*\))i
($4\);)g(trivsql_xfree\(gState-)596 5207 y Fc(>)p Fe(table\);)f
(gState-)p Fc(>)p Fe(table)f(=)j(trivsql_xsnprintf\("\045s",)c($4\);)j
(})h(wsel)f(';')596 5290 y({)g(trivsql_checktable\(\(char)d(*\))j($4,)h
(gState-)p Fc(>)p Fe(rs\);)e(if\(gState-)p Fc(>)p Fe(rs-)p
Fc(>)p Fe(errno)e(==)j(TRIVSQL_FALSE\){trivsql_doselect\(\(char)39
b(*\))44 b($4,)h(\(char)f(*\))g($2\);}})999 5372 y(;)p
Black 197 5585 a Fd(10)p Black eop
%%Page: 11 11
11 10 bop Black 0 TeXcolorgray Black 2034 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 596 89 a Fe(alt)268 b(:)45 b(ALTER)f(STRING)f(ADD)i(COLUMN)f
(STRING)f(';')596 171 y({)h(gState-)p Fc(>)p Fe(rs)f(=)i
(trivsql_makers\(\(char)c(*\))k($2\);)f(trivsql_checktable\(\(char)d
(*\))j($2,)h(gState-)596 253 y Fc(>)p Fe(rs\);)e(if\(gState-)p
Fc(>)p Fe(rs-)p Fc(>)p Fe(errno)f(==)i
(TRIVSQL_FALSE\){trivsql_doalter\(\(char)39 b(*\))44
b($2,)h(\(char)f(*\))g($5\);}})999 336 y(;)596 500 y(upd)268
b(:)45 b(UPDATE)e(STRING)h(SET)h(STRING)e('=')i(str)f({)h(gState-)p
Fc(>)p Fe(rs)e(=)h(trivsql_makers\(\(char)e(*\))i($2\);)h
(trivsql_xfree\(gState-)596 582 y Fc(>)p Fe(table\);)e(gState-)p
Fc(>)p Fe(table)f(=)j(trivsql_xsnprintf\("\045s",)c($2\);)j(})h(wsel)f
(';')596 664 y({trivsql_checktable\(\(char)c(*\))45 b($2,)f(gState-)p
Fc(>)p Fe(rs\);)f(if\(gState-)p Fc(>)p Fe(rs-)p Fc(>)p
Fe(errno)e(==)j(TRIVSQL_FALSE\){trivsql_doselect\(\(char)39
b(*\))45 b($2,)f(\(char)g(*\))g($4\);)h(trivsql_updaters\(gState,)40
b(gState-)596 747 y Fc(>)p Fe(rs,)k(\(char)g(*\))g($4,)g(\(char)g(*\))h
($6\);}})999 829 y(;)596 1158 y(cvsaster)e(:)i(colvalspec)e({)h($$)h(=)
g(trivsql_xsnprintf\("\045s",)c(\(char)j(*\))g($1\);)g(})999
1240 y(|)h('*')f({)h($$)f(=)h(trivsql_xsnprintf\("*"\);)c(})999
1322 y(;)596 1486 y(colvalspec)i(:)h(str)h(',')f(colvalspec)f({)i($$)f
(=)h(trivsql_xsnprintf\("\045s;\045s",)40 b(\(char)k(*\))h($1,)f
(\(char)g(*\))h($3\);)f(})999 1569 y(|)h(str)f({)h($$)f(=)h
(trivsql_xsnprintf\("\045s",)c(\(char)j(*\))g($1\);)g(})999
1651 y(;)596 1815 y(wsel)223 b(:)45 b(WHERE)f(selector)f({)i(gState-)p
Fc(>)p Fe(seltree)d(=)j($2;)f(})999 1897 y(|)999 1979
y(;)596 2144 y(selector)f(:)i(str)f('=')g(str)h({)f($$)h(=)f
(trivsql_makesel\(trivsql_selequal,)c($1,)k($3\);)g(})999
2226 y(|)h(str)f(LIKE)g(str)g({)h($$)g(=)f
(trivsql_makesel\(trivsql_sellike,)c($1,)k($3\);)g(})999
2308 y(|)h(selector)e(AND)h(selector)g({)h($$)f(=)h
(trivsql_makeslr\(trivsql_seland,)39 b($1,)45 b($3\);)f(})999
2390 y(|)h(selector)e(OR)i(selector)e({)i($$)f(=)h
(trivsql_makeslr\(trivsql_seland,)40 b($1,)k($3\);)g(})999
2473 y(|)h('\(')f(selector)f('\)')i({)f($$)h(=)g($2;)f(})685
2555 y(|)h({)g($$)f(=)h(NULL;)f(})999 2637 y(;)596 2801
y(str)268 b(:)45 b(STRING)e({)i($$)g(=)f($1;)h(})999
2884 y(|)g('\\\224)f(STRING)g('\\\224)g({)h($$)f(=)h($2;)f(})999
2966 y(;)596 3130 y(\045\045)596 3295 y(int)g(yyerror\(char)f(*s\){)685
3377 y(printf\("\\nsql)g(parsing)g(error:)h(\045s\\n",)g(s\);)685
3459 y(exit\(42\);)596 3541 y(})596 3715 y Fd(Code:)20
b(/home/mikal/opensour)o(ce/trivsql/parser)-6 b(.y)596
4023 y Fb(A)m(utomake)25 b(Make\002le)r(.am)596 4160
y Fg(The)g(following)h(\002le)g(is)f(used)g(to)g(automatically)g
(generate)g(a)f(Make\002le,)g(in)i(conjunction)h(with)596
4252 y Fi(autoconf)p Fg(.)596 4417 y Fe(lib_LTLIBRARIES)42
b(=)i(libtrivsql.la)596 4499 y(noinst_PROGRAMS)e(=)i(sample)596
4664 y(libtrivsql_la_SOURCES)d(=)j(parser.y)g(lexer.l)g(tdb.c)g
(spinlock.c)f(selectors.c)g(in-)596 4746 y(terface.c)g(internal.c)596
4910 y(include_HEADERS)f(=)i(trivsql.h)g(trivsql_tdb.h)e
(trivsql_spinlock.h)596 5075 y(sample_SOURCES)g(=)j(example.c)596
5157 y(sample_LDADD)d(=)j(-ltrivsql)e(-L.libs)596 5321
y(YFLAGS)g(=)i(-d)p Black 3601 5585 a Fd(11)p Black eop
%%Page: 12 12
12 11 bop Black 0 TeXcolorgray Black 197 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 596 89 a(Code:)g(/home/mikal/opensour)o(ce/trivsql/Make\002le.am)
596 397 y Fb(A)m(utoconf)25 b(con\002gure)r(.in)596 534
y Fg(The)30 b(following)j(\002le)e(is)g(used)g(to)g(automatically)g
(generate)f(a)g(con\002gur)o(e)h(script,)f(which)i(will)596
625 y(build)20 b(a)h(Make\002le)e(appr)o(opriate)g(to)i(the)g(build)g
(host.)596 791 y Fe(dnl)44 b(Process)f(this)i(file)f(with)g(autoconf)f
(to)i(produce)f(a)g(configure)g(script.)596 873 y(AC_INIT\(lexer.l\))
596 955 y(AC_CONFIG_AUX_DIR\(config\))596 1037 y(AC_REVISION)596
1119 y(AM_INIT_AUTOMAKE\(trivsql,)c(0.4.1\))596 1202
y(AM_MAINTAINER_MODE)596 1366 y(dnl)k(Libtool)596 1448
y(AC_LIBTOOL_WIN32_DLL)596 1530 y(AC_LIBTOOL_DLOPEN)596
1695 y(dnl)g(Checks)g(for)g(programs.)596 1777 y(AC_PROG_CC)596
1859 y(AM_PROG_LEX)596 1941 y(AC_PROG_YACC)596 2023 y(AC_PROG_INSTALL)
596 2106 y(AC_PROG_RANLIB)596 2188 y(AM_PROG_LIBTOOL)596
2352 y(dnl)g(Checks)g(for)g(libraries.)596 2434 y(dnl)g(The)g(syntax)g
(is)g(library)g(name,)g(function,)f(action)h(if)h(found,)f(action)f(if)
i(not)f(found)596 2517 y(dnl)g(We)g(just)g(use)h(the)f(default)g(if)g
(found)g(action)g(which)g(adds)g(-l)p Fc(<)p Fe(lib)p
Fc(>)g Fe(to)g(the)h(LIBS)f(var)596 2599 y(dnl)g(and)g(#defined)g
(HAVE_LIB)p Fc(<)p Fe(lib)p Fc(>)596 2845 y Fe(dnl)g(-lm:)596
2928 y(AC_CHECK_LIB\(m,)e(atan\))596 3092 y(dnl)i(-lfl:)596
3174 y(AC_CHECK_LIB\(fl,)e(yywrap\))596 3339 y(dnl)i(Checks)g(for)g
(header)g(files.)596 3421 y(dnl)g(STDC)g(checks)g(for)g(stdlib.h)g
(stdarg.h)f(string.h)h(and)g(float.h)596 3503 y(AC_HEADER_STDC)596
3667 y(dnl)g(Checks)g(for)g(typedefs,)f(structures,)g(and)i(compiler)e
(characteristics.)596 3832 y(dnl)h(Checks)g(for)g(library)g(functions.)
596 3996 y(AC_OUTPUT\(Makefile\))596 4417 y Fd(Code:)20
b(/home/mikal/opensour)o(ce/trivsql/con\002gur)o(e.in)596
4725 y Fb(C)25 b(sour)n(ce)f(code)596 4862 y Fg(The)c(following)j
(\002les)e(implement)g Fi(trivsql)f Fg(and)g Fi(tdb)p
Fg(...)596 5027 y Fe(#include)43 b("trivsql_tdb.h")596
5109 y(#include)g("trivsql_spinlock.h")596 5274 y(#ifndef)g
(TRIVSQL_HEADER)596 5356 y(#define)g(TRIVSQL_HEADER)p
Black 197 5585 a Fd(12)p Black eop
%%Page: 13 13
13 12 bop Black 0 TeXcolorgray Black 2034 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 596 89 a Fe(#ifdef)43 b(__cplusplus)596 171 y(extern)g("C")596
253 y({)596 336 y(#endif)596 500 y(#define)g(TRIVSQL_FALSE)g(0)596
582 y(#define)g(TRIVSQL_TRUE)g(1)596 747 y(#define)g
(TRIVSQL_NOSUCHTABLE)f(2)596 829 y(#define)h(TRIVSQL_BADVALUES)f(3)596
911 y(#define)h(TRIVSQL_MEMORYERROR)f(4)596 993 y(#define)h
(TRIVSQL_TDBNULLKEY)f(5)596 1075 y(#define)h(TRIVSQL_TDBNULLDATA)f(6)
596 1158 y(#define)h(TRIVSQL_TDBSTOREERROR)e(7)596 1240
y(#define)i(TRIVSQL_NOSUCHCOLUMN)f(8)596 1322 y(#define)h
(TRIVSQL_NOROWSTOUPDATE)e(9)596 1404 y(#define)i(TRIVSQL_BADSELCOLARG)f
(10)596 1486 y(#define)h(TRIVSQL_DBOPENFAIL)f(11)596
1651 y(#define)h(SELTRUE)h(1)596 1733 y(#define)f(SELFALSE)h(0)596
1897 y(typedef)f(int)h(\(*trivsql_selectorfunc\))d(\(char)j(*arg1,)g
(char)g(*arg2\);)596 2062 y(typedef)f(struct)h
(trivsql_internal_seltreenode)596 2144 y({)685 2226 y(char)g
(*selArgOne;)685 2308 y(int)h(selColOne;)685 2390 y(char)f(*selArgTwo;)
685 2473 y(int)h(selColTwo;)685 2555 y(trivsql_selectorfunc)d
(selector;)685 2637 y(struct)i(trivsql_internal_seltreenode)c(*left,)k
(*right;)596 2719 y(})g(trivsql_seltreenode;)596 2884
y(typedef)f(struct)h(trivsql_internal_col)596 2966 y({)685
3048 y(char)g(*val;)685 3130 y(char)g(*key;)685 3212
y(struct)g(trivsql_internal_col)d(*next;)596 3295 y(})j(trivsql_col;)
596 3459 y(typedef)f(struct)h(trivsql_internal_row)596
3541 y({)685 3623 y(trivsql_col)f(*cols;)685 3706 y(struct)h
(trivsql_internal_row)d(*next,)j(*prev;)596 3788 y(})g(trivsql_row;)596
3952 y(typedef)f(struct)h(trivsql_internal_rs)596 4034
y({)685 4116 y(int)h(numCols;)685 4199 y(int)g(numRows;)685
4281 y(trivsql_row)e(*rows;)685 4363 y(trivsql_row)g(*currentRow;)685
4527 y(char)h(*tname;)685 4610 y(char)g(*cols;)685 4774
y(int)h(errno;)685 4856 y(char)f(*errstring;)596 4938
y(})g(trivsql_recordset;)596 5103 y(typedef)f(struct)h
(trivsql_internal_state)596 5185 y({)685 5267 y(TDB_CONTEXT)f(*db;)685
5349 y(trivsql_recordset)f(*rs;)685 5432 y(trivsql_seltreenode)g
(*seltree;)p Black 3601 5585 a Fd(13)p Black eop
%%Page: 14 14
14 13 bop Black 0 TeXcolorgray Black 197 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 685 89 a Fe(char)44 b(*table;)596 171 y(})g(trivsql_state;)596
336 y(//)g(Internal)f(functions)596 418 y(trivsql_state)f
(*trivsql_init\(char)g(*\);)596 500 y(void)i(trivsql_docreate\(char)d
(*,)j(char)h(*\);)596 582 y(void)f(trivsql_doinsert\(char)d(*,)j(char)h
(*,)f(char)g(*\);)596 664 y(void)g(trivsql_doselect\(char)d(*,)j(char)h
(*\);)596 747 y(void)f(trivsql_doalter\(char)d(*,)k(char)f(*\);)596
911 y(int)g(*trivsql_parsecols\(char)d(*,)j(char)g(*,)h(int)f(*\);)596
993 y(int)g(trivsql_findcol\(char)d(*,)k(char)f(*,)g(char)h(*\);)596
1075 y(void)f(trivsql_addrow\(trivsql_recordset)39 b(*,)45
b(char)f(*,)g(int,)g(int)h(*\);)596 1158 y(char)f
(*trivsql_getallcolumns\(char)c(*\);)596 1240 y(trivsql_recordset)h
(*trivsql_makers\(\);)596 1322 y(trivsql_seltreenode)g
(*trivsql_makest\(\);)596 1404 y(trivsql_seltreenode*)g
(trivsql_makesel\(trivsql_selectorfunc,)e(char)44 b(*,)g(char)g(*\);)
596 1486 y(trivsql_seltreenode*)d
(trivsql_makeslr\(trivsql_selectorfunc,)999 1569 y(trivsql_seltreenode)
h(*,)999 1651 y(trivsql_seltreenode)g(*\);)596 1733 y(int)i
(trivsql_executeselector\(trivsql_seltre)o(enode)38 b(*,)45
b(int\);)596 1897 y(void)f(trivsql_checktable\(char)d(*,)j
(trivsql_recordset)e(*\);)596 2062 y(void)i
(*trivsql_xmalloc\(size_t\);)596 2144 y(void)g
(trivsql_dbwrite\(trivsql_state)c(*,)k(char)g(*,)h(char)f(*\);)596
2226 y(char)g(*trivsql_dbread\(trivsql_state)c(*,)k(char)g(*\);)596
2308 y(char)g(*trivsql_xsnprintf\(char)d(*,)j(...\);)596
2390 y(void)g(trivsql_xfree\(void)d(*\);)596 2473 y(void)j
(*trivsql_xrealloc\(void)d(*,)j(size_t\);)596 2555 y(int)g
(trivsql_min\(int,)e(int\);)596 2637 y(int)i
(trivsql_initok\(trivsql_state)c(*\);)596 2801 y(//)k(Selectors)596
2884 y(int)g(trivsql_selequal\(char)d(*,)k(char)f(*\);)596
2966 y(int)g(trivsql_sellike\(char)d(*,)k(char)f(*\);)596
3048 y(int)g(trivsql_selor\(int,)e(int\);)596 3130 y(int)i
(trivsql_seland\(int,)d(int\);)596 3295 y(//)j(Interface)f(methods)596
3377 y(trivsql_state)f(*trivsql_opendb\(char)g(*\);)596
3459 y(trivsql_recordset)f(*trivsql_execute\(trivsql_state)f(*,)45
b(char)f(*\);)596 3541 y(int)g(trivsql_gettext\(char)d(*,)k(int\);)596
3623 y(void)f(trivsql_displayrs\(trivsql_recordset)39
b(*\);)596 3706 y(void)44 b(trivsql_rsmovefirst\(trivsql_recordset)38
b(*\);)596 3788 y(void)44 b(trivsql_rsmovenext\(trivsql_recordset)38
b(*\);)596 3870 y(int)44 b(trivsql_rseof\(trivsql_recordset)39
b(*\);)596 3952 y(int)44 b(trivsql_rsbof\(trivsql_recordset)39
b(*\);)596 4034 y(char)44 b(*trivsql_rsfield\(trivsql_recordset)39
b(*,)44 b(int\);)596 4116 y(void)g(trivsql_updaters\(trivsql_state)39
b(*,)45 b(trivsql_recordset)d(*,)i(char)h(*,)f(char)g(*\);)596
4199 y(void)g(trivsql_rsupdatefield\(trivsql_state)39
b(*,)44 b(trivsql_recordset)e(*,)865 4281 y(int,)i(char)g(*newval\);)
596 4445 y(#ifdef)f(__cplusplus)596 4527 y(})596 4610
y(#endif)596 4774 y(#endif)596 4948 y Fd(Code:)20 b
(/home/mikal/opensour)o(ce/trivsql/trivsql.h)596 5114
y Fe(#include)43 b("trivsql.h")596 5278 y(char)h(*gTrivData)f(=)h
(NULL;)596 5360 y(int)g(gTrivInset;)p Black 197 5585
a Fd(14)p Black eop
%%Page: 15 15
15 14 bop Black 0 TeXcolorgray Black 2034 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 596 89 a Fe(extern)43 b(trivsql_state)g(*gState;)596
253 y(//)h(Interface)f(to)i(the)f(SQL)g(database)596
336 y(trivsql_state)e(*trivsql_opendb\(char)g(*path\){)685
418 y(return)i(trivsql_init\(path\);)596 500 y(})596
664 y(trivsql_recordset)d(*trivsql_execute\(trivsql_state)f(*state,)k
(char)g(*sql\){)685 747 y(trivsql_xfree\(gTrivData\);)685
829 y(gTrivData)f(=)i(trivsql_xsnprintf\("\045s",)c(sql\);)685
911 y(gTrivInset)i(=)i(0;)685 1075 y(trivsql_xfree\(state-)p
Fc(>)p Fe(rs\);)685 1158 y(state-)p Fc(>)p Fe(rs)e(=)i(NULL;)685
1240 y(gState)f(=)h(state;)685 1322 y(yyparse\(\);)685
1404 y(return)f(gState-)p Fc(>)p Fe(rs;)596 1486 y(})596
1651 y(int)g(trivsql_gettext\(char)d(*buffer,)j(int)g(maxlen\){)685
1733 y(int)h(size;)685 1897 y(//)g(Determine)e(the)h(maximum)g(size)g
(to)h(return)685 1979 y(size)f(=)h(trivsql_min\(maxlen,)d
(strlen\(gTrivData\))g(-)i(gTrivInset\);)685 2144 y(if\(size)g
Fc(>)g Fe(0\){)775 2226 y(memcpy\(buffer,)e(gTrivData)i(+)g
(gTrivInset,)f(size\);)775 2308 y(gTrivInset)g(+=)h(size;)685
2390 y(})685 2555 y(return)g(size;)596 2637 y(})596 2801
y(void)g(trivsql_displayrs\(trivsql_recordset)39 b(*rs\){)685
2884 y(int)45 b(i,)f(col;)685 2966 y(char)g(*t,)h(*u,)f(*c,)g
(*localCols;)685 3130 y(//)h(Was)f(there)g(an)g(error?)685
3212 y(switch\(rs-)p Fc(>)p Fe(errno\){)685 3295 y(case)g
(TRIVSQL_FALSE:)775 3377 y(printf\("This)f(statement)g(produced)g(no)i
(results.\\n"\);)775 3459 y(return;)685 3623 y(case)f(TRIVSQL_TRUE:)775
3706 y(break;)685 3870 y(default:)775 3952 y(printf\("There)e(was)j(an)
f(error)g(processing)f(this)i(statement)e(\(\045d\).\\n",)775
4034 y(rs-)p Fc(>)p Fe(errno\);)775 4116 y(if\(rs-)p
Fc(>)p Fe(errstring)f(!=)i(NULL\))865 4199 y(printf\("trivsql)e(engine)
i(reported:)f(\045s\\n",)h(rs-)p Fc(>)p Fe(errstring\);)775
4281 y(return;)685 4363 y(})685 4527 y(//)h(Print)f(the)g(header)g
(line)685 4610 y(printf\("\\n="\);)685 4692 y(for\(i)g(=)h(0;)f(i)h
Fc(<)g Fe(rs-)p Fc(>)p Fe(numCols;)d(i++\){)775 4774
y(printf\("==============="\);)685 4856 y(})685 4938
y(printf\("\\n|"\);)685 5103 y(//)j(Print)f(out)g(the)g(column)g(names)
685 5185 y(localCols)f(=)i(trivsql_xsnprintf\("\045s",)c(rs-)p
Fc(>)p Fe(cols\);)685 5267 y(c)k(=)g(strtok\(localCols,)c(";"\);)685
5349 y(while\(c)j(!=)g(NULL\){)775 5432 y(printf\(")f(\045-12s)h(|",)h
(c\);)p Black 3601 5585 a Fd(15)p Black eop
%%Page: 16 16
16 15 bop Black 0 TeXcolorgray Black 197 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 775 89 a Fe(c)45 b(=)f(strtok\(NULL,)f(";"\);)685
171 y(})685 336 y(printf\("\\n="\);)685 418 y(for\(i)h(=)h(0;)f(i)h
Fc(<)g Fe(rs-)p Fc(>)p Fe(numCols;)d(i++\){)775 500 y
(printf\("==============="\);)685 582 y(})685 664 y(printf\("\\n"\);)
685 829 y(//)j(Print)f(out)g(the)g(values)g(we)h(have)f(found)685
911 y(trivsql_rsmovefirst\(rs\);)685 993 y(while\(trivsql_rseof\(rs\))d
(!=)k(TRIVSQL_TRUE\){)775 1075 y(for\(i)f(=)g(0;)h(i)g
Fc(<)f Fe(rs-)p Fc(>)p Fe(numCols;)f(i++\))865 1158 y(printf\("|)g
(\045-12s)h(",)g(trivsql_rsfield\(rs,)e(i\)\);)775 1240
y(printf\("|\\n-"\);)775 1322 y(for\(i)i(=)g(0;)h(i)g
Fc(<)f Fe(rs-)p Fc(>)p Fe(numCols;)f(i++\){)865 1404
y(printf\("---------------"\);)775 1486 y(})775 1569
y(printf\("\\n"\);)775 1733 y(trivsql_rsmovenext\(rs\);)685
1815 y(})685 1979 y(printf\("\\n"\);)685 2062 y(printf\("Select)g
(returned)g(\045d)i(rows)f(of)g(\045d)h(columns\\n",)685
2144 y(rs-)p Fc(>)p Fe(numRows,)e(rs-)p Fc(>)p Fe(numCols\);)596
2226 y(})596 2390 y(void)h(trivsql_rsmovefirst\(trivsql_recordset)38
b(*rs\){)685 2473 y(rs-)p Fc(>)p Fe(currentRow)43 b(=)h(rs-)p
Fc(>)p Fe(rows;)596 2555 y(})596 2719 y(void)g
(trivsql_rsmovenext\(trivsql_recordset)38 b(*rs\){)685
2801 y(if\(rs-)p Fc(>)p Fe(currentRow-)p Fc(>)p Fe(next)j(!=)j(NULL\))
775 2884 y(rs-)p Fc(>)p Fe(currentRow)e(=)j(rs-)p Fc(>)p
Fe(currentRow-)p Fc(>)p Fe(next;)596 2966 y(})596 3130
y(int)f(trivsql_rseof\(trivsql_recordset)39 b(*rs\){)685
3212 y(if\(rs-)p Fc(>)p Fe(errno)k(!=)h(TRIVSQL_TRUE\))f(return)h
(TRIVSQL_TRUE;)685 3295 y(return)g(rs-)p Fc(>)p Fe(currentRow-)p
Fc(>)p Fe(next)d(==)k(NULL)f(?)h(TRIVSQL_TRUE)d(:)j(TRIVSQL_FALSE;)596
3377 y(})596 3541 y(int)f(trivsql_rsbof\(trivsql_recordset)39
b(*rs\){)685 3623 y(return)44 b(rs-)p Fc(>)p Fe(currentRow)e(==)j(rs-)p
Fc(>)p Fe(rows)e(?)i(TRIVSQL_TRUE)e(:)h(TRIVSQL_FALSE;)596
3706 y(})596 3870 y(char)g(*trivsql_rsfield\(trivsql_recordset)39
b(*rs,)44 b(int)g(colnum\){)685 3952 y(int)h(count;)685
4034 y(trivsql_col)e(*theCol;)685 4199 y(count)h(=)h(0;)685
4281 y(theCol)f(=)h(rs-)p Fc(>)p Fe(currentRow-)p Fc(>)p
Fe(cols;)685 4363 y(while\(\(theCol-)p Fc(>)p Fe(next)d(!=)i(NULL\))g
(&&)h(\(count)f Fc(<)g Fe(colnum\)\){)775 4445 y(theCol)g(=)g(theCol-)p
Fc(>)p Fe(next;)775 4527 y(count++;)685 4610 y(})685
4774 y(return)g(theCol-)p Fc(>)p Fe(val;)596 4856 y(})596
5021 y(void)g(trivsql_updaters\(trivsql_state)39 b(*state,)44
b(trivsql_recordset)e(*rs,)954 5103 y(char)i(*col,)g(char)g(*newval\){)
685 5185 y(//)h(Was)f(there)g(an)g(error?)685 5267 y(switch\(rs-)p
Fc(>)p Fe(errno\){)685 5349 y(case)g(TRIVSQL_FALSE:)775
5432 y(gState-)p Fc(>)p Fe(rs-)p Fc(>)p Fe(errno)e(=)i
(TRIVSQL_NOROWSTOUPDATE;)p Black 197 5585 a Fd(16)p Black
eop
%%Page: 17 17
17 16 bop Black 0 TeXcolorgray Black 2034 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 775 89 a Fe(return;)685 253 y(case)44 b(TRIVSQL_TRUE:)775
336 y(break;)685 500 y(default:)775 582 y(return;)685
664 y(})685 829 y(//)h(For)f(the)g(moment)g(we)h(assume)e(there)h(is)h
(only)f(one)g(column)685 911 y(trivsql_rsmovefirst\(rs\);)685
993 y(while\(trivsql_rseof\(rs\))d(!=)k(TRIVSQL_TRUE\){)775
1075 y(trivsql_rsupdatefield\(state,)40 b(rs,)k(0,)h(newval\);)775
1158 y(trivsql_rsmovenext\(rs\);)685 1240 y(})596 1322
y(})596 1486 y(//)f(NOTE:)g(The)g(existing)g(recordset)f(is)i(not)f
(updated)g(--)g(you)g(need)h(to)f(reselect)596 1569 y(void)g
(trivsql_rsupdatefield\(trivsql_state)39 b(*state,)k(trivsql_recordset)
f(*rs,)865 1651 y(int)i(colnum,)f(char)i(*newval\){)685
1733 y(int)g(count;)685 1815 y(trivsql_col)e(*theCol;)685
1979 y(count)h(=)h(0;)685 2062 y(theCol)f(=)h(rs-)p Fc(>)p
Fe(currentRow-)p Fc(>)p Fe(cols;)685 2144 y(while\(\(theCol-)p
Fc(>)p Fe(next)d(!=)i(NULL\))g(&&)h(\(count)f Fc(<)g
Fe(colnum\)\){)775 2226 y(theCol)g(=)g(theCol-)p Fc(>)p
Fe(next;)775 2308 y(count++;)685 2390 y(})685 2555 y
(trivsql_dbwrite\(state,)d(theCol-)p Fc(>)p Fe(key,)i(newval\);)596
2637 y(})596 2811 y Fd(Code:)20 b(/home/mikal/opensour)o
(ce/trivsql/interface.c)596 2977 y Fe(#include)43 b("trivsql.h")596
3059 y(#include)g Fc(<)p Fe(stdarg.h)p Fc(>)596 3223
y Fe(extern)g(trivsql_state)g(*gState;)596 3305 y(const)h(char)g
(*trivsql_version)e(=)i(VERSION;)596 3470 y(trivsql_state)e
(*trivsql_init\(char)g(*filename\){)685 3552 y(trivsql_state)h(*state;)
685 3716 y(state)h(=)h(\(trivsql_state)d(*\))j
(trivsql_xmalloc\(sizeof\(trivsql_state\)\))o(;)685 3799
y(state-)p Fc(>)p Fe(db)e(=)i(tdb_open\(filename,)d(0,)i(0,)h(O_RDWR)f
(|)g(O_CREAT,)g(0600\);)685 3881 y(state-)p Fc(>)p Fe(rs)f(=)i(NULL;)
685 3963 y(state-)p Fc(>)p Fe(seltree)e(=)h(NULL;)685
4045 y(state-)p Fc(>)p Fe(table)f(=)i(NULL;)685 4209
y(//)g(We)f(write)g(the)g(version)g(of)h(trivsql)e(we)i(used)f(into)g
(a)h(tag)f(in)h(the)f(tdb)g(for)685 4292 y(//)h(debugging)685
4374 y(if\(state-)p Fc(>)p Fe(db)e(!=)h(NULL\))775 4456
y(trivsql_dbwrite\(state,)d("trivsql_lastversion",)g
(trivsql_version\);)685 4620 y(return)j(state;)596 4703
y(})596 4867 y(void)g(trivsql_docreate\(char)d(*tname,)j(char)g
(*cols\))596 4949 y({)685 5031 y(char)g(*t;)685 5114
y(char)g(*u;)685 5196 y(int)h(colCount)e(=)i(0;)685 5360
y(t)g(=)g(trivsql_xsnprintf\("trivsql_\045s_numrow)o(s",)39
b(tname\);)685 5442 y(trivsql_dbwrite\(gState,)i(t,)k("0"\);)p
Black 3601 5585 a Fd(17)p Black eop
%%Page: 18 18
18 17 bop Black 0 TeXcolorgray Black 197 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 685 89 a Fe(trivsql_xfree\(t\);)685 253 y(u)45
b(=)g(strtok\(cols,)d(";"\);)685 336 y(while\(u)i(!=)g(NULL\){)775
418 y(t)h(=)f(trivsql_xsnprintf\("trivsql_\045s_col\045d",)39
b(tname,)44 b(colCount\);)775 500 y(trivsql_dbwrite\(gState,)d(t,)j
(u\);)775 582 y(trivsql_xfree\(t\);)775 747 y(colCount++;)775
829 y(u)h(=)f(strtok\(NULL,)f(";"\);)685 911 y(})685
1075 y(t)i(=)g(trivsql_xsnprintf\("trivsql_\045s_numcol)o(s",)39
b(tname\);)685 1158 y(u)45 b(=)g(trivsql_xsnprintf\("\045d",)40
b(colCount\);)685 1240 y(trivsql_dbwrite\(gState,)h(t,)k(u\);)685
1322 y(trivsql_xfree\(t\);)685 1404 y(trivsql_xfree\(u\);)596
1486 y(})596 1651 y(void)f(trivsql_doinsert\(char)d(*tname,)j(char)g
(*cols,)g(char)g(*vals\){)685 1733 y(char)g(*t,)h(*u,)f(*c;)685
1815 y(int)h(rowCount,)e(i,)h(col,)g(numCols;)685 1897
y(int)h(*colNumbers;)685 2062 y(if\(\(rowCount)e(=)i
(trivsql_getrowcount\(tname\)\))40 b(==)k(-1\){)775 2144
y(return;)685 2226 y(})685 2390 y(//)h(Get)f(ready)g(for)g(columns)685
2473 y(if\(\(colNumbers)f(=)h(trivsql_parsecols\(tname,)d(cols,)j
(&numCols\)\))f(==)i(NULL\){)775 2555 y(return;)685 2637
y(})685 2801 y(//)g(How)f(we)g(have)h(the)f(right)g(number)g(of)g
(values?)685 2884 y(col)h(=)f(1;)685 2966 y(for\(i)g(=)h(0;)f(i)h
Fc(<)g Fe(strlen\(vals\);)d(i++\))775 3048 y(if\(vals[i])h(==)h(';'\))
865 3130 y(col++;)685 3295 y(if\(col)g(!=)g(numCols\){)775
3377 y(gState-)p Fc(>)p Fe(rs-)p Fc(>)p Fe(errno)e(=)i
(TRIVSQL_BADVALUES;)775 3459 y(return;)685 3541 y(})685
3706 y(//)h(Save)f(each)g(column)g(value)685 3788 y(c)h(=)g
(strtok\(vals,)d(";"\);)685 3870 y(col)j(=)f(0;)685 3952
y(while\(c)g(!=)g(NULL\){)775 4034 y(t)h(=)f
(trivsql_xsnprintf\("trivsql_\045s_col\045drow\045d)o(",)39
b(tname,)44 b(colNumbers[col],)e(rowCount\);)775 4116
y(trivsql_dbwrite\(gState,)f(t,)j(c\);)775 4199 y(trivsql_xfree\(t\);)
775 4363 y(c)h(=)f(strtok\(NULL,)f(";"\);)775 4445 y(col++;)685
4527 y(})685 4692 y(//)i(And)f(we)g(should)g(keep)g(count)g(of)h(how)f
(many)g(of)h(the)f(rows)g(are)h(in)f(the)h(table)685
4774 y(t)g(=)g(trivsql_xsnprintf\("trivsql_\045s_numrow)o(s",)39
b(tname\);)685 4856 y(u)45 b(=)g(trivsql_xsnprintf\("\045d",)40
b(rowCount)k(+)h(1\);)685 4938 y(trivsql_dbwrite\(gState,)c(t,)k(u\);)
685 5021 y(trivsql_xfree\(t\);)685 5103 y(trivsql_xfree\(u\);)596
5185 y(})596 5349 y(void)f(trivsql_doselect\(char)d(*tname,)j(char)g
(*cols\){)685 5432 y(int)h(*colNumbers;)p Black 197 5585
a Fd(18)p Black eop
%%Page: 19 19
19 18 bop Black 0 TeXcolorgray Black 2034 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 685 89 a Fe(int)45 b(row,)f(rowCount,)f(numCols;)685
171 y(char)h(*t,)h(*u,)f(*localCols;)685 336 y(//)h(If)f(the)g(columns)
g(list)g(is)h('*',)f(substitute)f(a)i(list)f(of)g(all)h(the)f(columns)
685 418 y(if\(strcmp\(cols,)e("*"\))j(==)f(0\))775 500
y(localCols)f(=)i(trivsql_getallcolumns\(tname\);)685
582 y(else)775 664 y(localCols)e(=)i(cols;)685 829 y(//)g(Get)f(ready)g
(for)g(columns)685 911 y(if\(\(colNumbers)f(=)h
(trivsql_parsecols\(tname,)d(localCols,)i(&numCols\)\))g(==)i(NULL\){)
775 993 y(return;)685 1075 y(})685 1240 y(//)g(Populate)e(recordset)685
1322 y(gState-)p Fc(>)p Fe(rs-)p Fc(>)p Fe(numCols)f(=)i(numCols;)685
1404 y(gState-)p Fc(>)p Fe(rs-)p Fc(>)p Fe(cols)e(=)j
(trivsql_xsnprintf\("\045s",)c(localCols\);)685 1486
y(gState-)p Fc(>)p Fe(rs-)p Fc(>)p Fe(errno)h(=)j(TRIVSQL_TRUE;)685
1651 y(//)g(Decide)e(what)i(rows)f(on)g(the)h(table)f(match)g(the)g
(select)g(condition)685 1733 y(if\(\(rowCount)f(=)i
(trivsql_getrowcount\(tname\)\))40 b(==)k(-1\){)775 1815
y(return;)685 1897 y(})685 2062 y(for\(row)g(=)g(0;)h(row)f
Fc(<)h Fe(rowCount;)e(row++\){)775 2144 y
(if\(trivsql_executeselector\(gState-)p Fc(>)p Fe(sel)o(tree,)38
b(row\))45 b(==)f(SELTRUE\))865 2226 y(trivsql_addrow\(gState-)p
Fc(>)p Fe(rs,)c(tname,)k(row,)g(colNumbers\);)685 2308
y(})596 2390 y(})596 2555 y(void)g(trivsql_doalter\(char)d(*tname,)j
(char)g(*cols\))596 2637 y({)685 2719 y(char)g(*t;)685
2801 y(char)g(*u;)685 2884 y(int)h(colCount)e(=)i(0;)685
3048 y(t)g(=)g(trivsql_xsnprintf\("trivsql_\045s_numcol)o(s",)39
b(tname\);)685 3130 y(u)45 b(=)g(trivsql_dbread\(gState,)c(t\);)685
3212 y(if\(u)j(==)h(NULL\))f(colCount)f(=)i(0;)685 3295
y(else)f(colCount)g(=)g(atoi\(u\);)685 3377 y(trivsql_xfree\(t\);)685
3459 y(trivsql_xfree\(u\);)685 3623 y(//)h(Add)f(the)g(column)685
3706 y(t)h(=)g(trivsql_xsnprintf\("trivsql_\045s_col\045d")o(,)39
b(tname,)44 b(colCount\);)685 3788 y(trivsql_dbwrite\(gState,)d(t,)k
(cols\);)685 3870 y(trivsql_xfree\(t\);)685 3952 y(colCount++;)685
4116 y(t)g(=)g(trivsql_xsnprintf\("trivsql_\045s_numcol)o(s",)39
b(tname\);)685 4199 y(u)45 b(=)g(trivsql_xsnprintf\("\045d",)40
b(colCount\);)685 4281 y(trivsql_dbwrite\(gState,)h(t,)k(u\);)685
4363 y(trivsql_xfree\(t\);)685 4445 y(trivsql_xfree\(u\);)596
4527 y(})596 4692 y(void)f(*)596 4774 y(trivsql_xmalloc)e(\(size_t)h
(size\))596 4856 y({)685 4938 y(void)h(*buffer;)685 5103
y(if)h(\(\(buffer)e(=)i(malloc)f(\(size\)\))f(==)i(NULL\))775
5185 y({)865 5267 y(//)f(todo_mikal:)f(improve)h(this)865
5349 y(fprintf\(stderr,)e("trivsql)h(memory)h(allocation)f(error"\);)
865 5432 y(exit\(42\);)p Black 3601 5585 a Fd(19)p Black
eop
%%Page: 20 20
20 19 bop Black 0 TeXcolorgray Black 197 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 775 89 a Fe(})685 253 y(return)44 b(buffer;)596
336 y(})596 500 y(void)596 582 y(trivsql_dbwrite)e(\(trivsql_state)g
(*state,)i(char)g(*key,)g(char)g(*value\))596 664 y({)685
747 y(TDB_DATA)g(dbkey,)f(dbdata;)685 911 y(if)i(\(key)f(==)g(NULL\){)
775 993 y(gState-)p Fc(>)p Fe(rs-)p Fc(>)p Fe(errno)e(=)i
(TRIVSQL_TDBNULLKEY;)775 1075 y(return;)685 1158 y(})685
1322 y(if)h(\(value)e(==)i(NULL\){)775 1404 y(gState-)p
Fc(>)p Fe(rs-)p Fc(>)p Fe(errno)d(=)i(TRIVSQL_TDBNULLDATA;)775
1486 y(return;)685 1569 y(})685 1733 y(//)h(We)f(need)g(to)h(build)f
(the)g(structures)f(for)i(the)f(TDB)g(call)685 1815 y(dbkey.dptr)f(=)i
(key;)685 1897 y(dbkey.dsize)e(=)i(strlen)f(\(key\))g(+)g(1;)685
1979 y(dbdata.dptr)f(=)i(value;)685 2062 y(dbdata.dsize)e(=)i(strlen)e
(\(value\))h(+)h(1;)685 2226 y(if)g(\(tdb_store)e(\(state-)p
Fc(>)p Fe(db,)g(dbkey,)h(dbdata,)f(TDB_REPLACE\))g(!=)h(0\))775
2308 y({)865 2390 y(gState-)p Fc(>)p Fe(rs-)p Fc(>)p
Fe(errno)d(=)k(TRIVSQL_TDBSTOREERROR;)865 2473 y(return;)775
2555 y(})596 2637 y(})596 2801 y(char)f(*)596 2884 y(trivsql_dbread)e
(\(trivsql_state)g(*state,)i(char)g(*key\))596 2966 y({)685
3048 y(TDB_DATA)g(dbkey,)f(dbdata;)685 3212 y(if)i(\(key)f(==)g
(NULL\){)775 3295 y(gState-)p Fc(>)p Fe(rs-)p Fc(>)p
Fe(errno)e(=)i(TRIVSQL_TDBNULLKEY;)775 3377 y(return)g(NULL;)685
3459 y(})685 3623 y(//)h(We)f(need)g(to)h(build)f(the)g(structures)f
(for)i(the)f(TDB)g(call)685 3706 y(dbkey.dptr)f(=)i(key;)685
3788 y(dbkey.dsize)e(=)i(strlen)f(\(key\))g(+)g(1;)685
3952 y(dbdata)g(=)h(tdb_fetch)e(\(state-)p Fc(>)p Fe(db,)g(dbkey\);)685
4116 y(return)h(dbdata.dptr;)596 4199 y(})596 4363 y(char)g(*)596
4445 y(trivsql_xsnprintf)d(\(char)j(*format,)g(...\))596
4527 y({)685 4610 y(char)g(*output)g(=)h(NULL;)685 4692
y(int)g(size,)e(result;)685 4774 y(va_list)h(ap;)685
4938 y(/*)h(We)f(start)g(with)g(the)h(size)f(of)g(the)h(format)e
(string)h(as)h(a)f(guess)g(*/)685 5021 y(size)g(=)h(strlen)f
(\(format\);)685 5103 y(va_start)g(\(ap,)g(format\);)685
5267 y(while)g(\(1\))775 5349 y({)865 5432 y(output)f(=)i(\(char)f(*\))
g(trivsql_xrealloc)f(\(output,)g(size\);)p Black 197
5585 a Fd(20)p Black eop
%%Page: 21 21
21 20 bop Black 0 TeXcolorgray Black 2034 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 865 89 a Fe(result)43 b(=)i(vsnprintf)e(\(output,)h(size,)g
(format,)f(ap\);)865 253 y(if)h(\(result)g(==)g(-1\))954
336 y({)1044 418 y(/*)g(Up)h(to)f(glibc)g(2.0.6)g(and)h(Microsoft's)e
(implementation)f(*/)1044 500 y(size)i(+=)g(100;)954
582 y(})865 664 y(else)954 747 y({)1044 829 y(/*)g(Check)g(if)h(we)f
(are)h(done)f(*/)1044 911 y(if)g(\(result)g Fc(<)h Fe(size\))1133
993 y(break;)1044 1158 y(/*)f(Glibc)g(from)g(now)h(on)f(*/)1044
1240 y(size)g(=)h(result)e(+)i(1;)954 1322 y(})775 1404
y(})685 1569 y(va_end)f(\(ap\);)685 1651 y(return)g(output;)596
1733 y(})596 1897 y(void)596 1979 y(trivsql_xfree)e(\(void)i(*memory\))
596 2062 y({)685 2144 y(if)h(\(memory)e(!=)i(NULL\))775
2226 y(free\(memory\);)596 2308 y(})596 2473 y(void)f(*)596
2555 y(trivsql_xrealloc)e(\(void)i(*memory,)f(size_t)h(size\))596
2637 y({)685 2719 y(void)g(*buffer;)685 2884 y(if)h(\(\(buffer)e(=)i
(realloc)e(\(memory,)h(size\)\))g(==)g(NULL\))775 2966
y({)865 3048 y(fprintf\(stderr,)e("Realloc)h(of)i(memory)f(failed"\);)
865 3130 y(exit\(42\);)775 3212 y(})685 3377 y(return)g(buffer;)596
3459 y(})596 3623 y(int)g(*trivsql_parsecols\(char)d(*tname,)i(char)i
(*cols,)e(int)i(*numCols\){)685 3706 y(int)g(i,)f(col;)685
3788 y(int)h(*colNumbers)d(=)j(NULL;)685 3870 y(char)f(*t,)h(*u,)f
(*coltmp,)f(*c;)685 4034 y(//)i(How)f(many)g(columns)g(do)g(we)h(have?)
685 4116 y(*numCols)f(=)g(1;)685 4199 y(for\(i)g(=)h(0;)f(i)h
Fc(<)g Fe(strlen\(cols\);)d(i++\))775 4281 y(if\(cols[i])h(==)h(';'\))
865 4363 y(\(*numCols\)++;)685 4527 y(coltmp)g(=)h
(trivsql_xsnprintf\("\045s",)c(cols\);)685 4610 y(colNumbers)i(=)i
(trivsql_xmalloc\(sizeof\(int\))40 b(*)45 b(\(*numCols\)\);)685
4774 y(//)g(Determine)e(that)h(the)g(named)g(columns)g(exist)685
4856 y(col)h(=)f(0;)685 4938 y(c)h(=)g(strtok\(coltmp,)d(";"\);)685
5021 y(while\(c)i(!=)g(NULL\){)775 5103 y(i)h(=)f(0;)775
5185 y(while\(1\){)865 5267 y(t)g(=)h
(trivsql_xsnprintf\("trivsql_\045s_col\045d",)38 b(tname,)44
b(i\);)865 5349 y(u)g(=)h(trivsql_dbread\(gState,)c(t\);)p
Black 3601 5585 a Fd(21)p Black eop
%%Page: 22 22
22 21 bop Black 0 TeXcolorgray Black 197 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 865 89 a Fe(if\(u)44 b(==)g(NULL\){)640 171 y
(trivsql_xfree\(t\);)640 253 y(//)h(todo_mikal:)e(this)h(make)g(break)g
(if)h(used)f(during)g(a)g(selection...)640 336 y(gState-)p
Fc(>)p Fe(rs-)p Fc(>)p Fe(errno)e(=)j(TRIVSQL_NOSUCHCOLUMN;)640
418 y(gState-)p Fc(>)p Fe(rs-)p Fc(>)p Fe(errstring)c(=)k
(trivsql_xsnprintf\("The)c(column)j(\\"\045s\\")g(does)g(not)g(ex-)596
500 y(ist)g(in)g(the)h(table)f(\\"\045s\\")f(\(search)h(inset)g(is)h
(\045d\).",)e(c,)i(tname,)f(i\);)640 582 y(return)g(NULL;)865
664 y(})865 747 y(else)g(if\(strcmp\(u,)e(c\))j(==)f(0\){)640
829 y(trivsql_xfree\(t\);)640 911 y(trivsql_xfree\(u\);)640
993 y(break;)865 1075 y(})865 1240 y(trivsql_xfree\(t\);)865
1322 y(trivsql_xfree\(u\);)865 1404 y(i++;)775 1486 y(})775
1651 y(colNumbers[col])e(=)j(i;)775 1733 y(c)g(=)f(strtok\(NULL,)f
(";"\);)775 1815 y(col++;)685 1897 y(})685 2062 y(return)h(colNumbers;)
596 2144 y(})596 2308 y(int)g(trivsql_findcol\(char)d(*tname,)j(char)g
(*cols,)g(char)g(*col\){)685 2390 y(char)g(*t,)h(*u,)f(*coltmp,)f(*c;)
685 2473 y(int)i(colNum;)685 2637 y(coltmp)f(=)h
(trivsql_xsnprintf\("\045s",)c(cols\);)685 2719 y(colNum)j(=)h(0;)685
2884 y(//)g(Determine)e(that)h(the)g(named)g(columns)g(exist)685
2966 y(c)h(=)g(strtok\(coltmp,)d(";"\);)685 3048 y(while\(c)i(!=)g
(NULL\){)775 3130 y(if\(strcmp\(c,)f(col\))h(==)g(0\))865
3212 y(return)f(colNum;)775 3377 y(c)i(=)f(strtok\(NULL,)f(";"\);)775
3459 y(colNum++;)685 3541 y(})685 3706 y(return)h(-1;)596
3788 y(})596 3952 y(int)g(trivsql_getrowcount\(char)d(*tname\){)685
4034 y(char)j(*t,)h(*u;)685 4116 y(int)g(rowCount;)685
4281 y(//)g(Determine)e(if)h(the)h(table)f(exists,)f(and)i(if)f(so)h
(how)f(many)g(rows)g(it)h(has)685 4363 y(t)g(=)g
(trivsql_xsnprintf\("trivsql_\045s_numrow)o(s",)39 b(tname\);)685
4445 y(u)45 b(=)g(trivsql_dbread\(gState,)c(t\);)685
4610 y(if\(u)j(==)h(NULL\){)775 4692 y(gState-)p Fc(>)p
Fe(rs-)p Fc(>)p Fe(errno)d(=)i(TRIVSQL_NOSUCHTABLE;)775
4774 y(gState-)p Fc(>)p Fe(rs-)p Fc(>)p Fe(errstring)d(=)k
(trivsql_xsnprintf\("Could)40 b(not)45 b(determine)e(the)h(row)h(count)
f(for)g(the)g(ta-)596 4856 y(ble)g(\\"\045s\\")g(because)f(the)i(table)
f(does)g(not)g(exist",)g(tname\);)775 4938 y(return)g(-1;)685
5021 y(})685 5185 y(rowCount)g(=)g(atoi\(u\);)685 5267
y(trivsql_xfree\(u\);)685 5349 y(trivsql_xfree\(t\);)p
Black 197 5585 a Fd(22)p Black eop
%%Page: 23 23
23 22 bop Black 0 TeXcolorgray Black 2034 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 685 89 a Fe(return)44 b(rowCount;)596 171 y(})596
336 y(void)g(trivsql_addrow\(trivsql_recordset)39 b(*rs,)44
b(char)g(*tname,)g(int)g(row,)h(int)f(*cols\){)685 418
y(char)g(*t;)685 500 y(int)h(colCount;)685 582 y(trivsql_row)e
(*theRow;)685 664 y(trivsql_col)g(*theCol;)685 829 y(//)i(Make)f(space)
g(for)g(the)g(new)h(row)685 911 y(rs-)p Fc(>)p Fe(numRows++;)685
993 y(theRow)f(=)h(rs-)p Fc(>)p Fe(rows;)685 1075 y(while\(theRow-)p
Fc(>)p Fe(next)d(!=)i(NULL\))775 1158 y(theRow)g(=)g(theRow-)p
Fc(>)p Fe(next;)685 1322 y(theRow-)p Fc(>)p Fe(next)f(=)i
(trivsql_xmalloc\(sizeof\(trivsql_row\)\);)685 1404 y(theRow-)p
Fc(>)p Fe(next-)p Fc(>)p Fe(next)d(=)i(NULL;)685 1569
y(theRow-)p Fc(>)p Fe(cols)f(=)i
(trivsql_xmalloc\(sizeof\(trivsql_col\)\);)685 1651 y(theRow-)p
Fc(>)p Fe(cols-)p Fc(>)p Fe(next)d(=)i(NULL;)685 1733
y(theCol)g(=)h(theRow-)p Fc(>)p Fe(cols;)685 1897 y(//)g(Get)f(the)g
(row)685 1979 y(for\(colCount)f(=)i(0;)f(colCount)g Fc(<)g
Fe(rs-)p Fc(>)p Fe(numCols;)f(colCount++\){)775 2062
y(t)i(=)f(trivsql_xsnprintf\("trivsql_\045s_col\045drow\045d)o(",)39
b(tname,)44 b(cols[colCount],)e(row\);)775 2226 y(theCol-)p
Fc(>)p Fe(val)h(=)h(trivsql_dbread\(gState,)e(t\);)775
2308 y(theCol-)p Fc(>)p Fe(key)h(=)h(t;)775 2390 y(theCol-)p
Fc(>)p Fe(next)f(=)h(trivsql_xmalloc\(sizeof\(trivsql_col\)\);)775
2473 y(theCol-)p Fc(>)p Fe(next-)p Fc(>)p Fe(next)d(=)k(NULL;)775
2555 y(theCol)f(=)g(theCol-)p Fc(>)p Fe(next;)685 2637
y(})596 2719 y(})596 2884 y(char)g(*trivsql_getallcolumns\(char)c
(*tname\))596 2966 y({)685 3048 y(char)k(*t,)h(*u,)f(*retVal,)f
(*retVal2;)685 3130 y(int)i(i,)f(maxCols;)685 3295 y(t)h(=)g
(trivsql_xsnprintf\("trivsql_\045s_numcol)o(s",)39 b(tname\);)685
3377 y(u)45 b(=)g(trivsql_dbread\(gState,)c(t\);)685
3459 y(if\(u)j(==)h(NULL\))f(maxCols)f(=)i(0;)685 3541
y(else)f(maxCols)g(=)h(atoi\(u\);)685 3623 y(trivsql_xfree\(t\);)685
3706 y(trivsql_xfree\(u\);)685 3870 y(retVal)f(=)h
(trivsql_xsnprintf\(""\);)685 4034 y(for\(i)f(=)h(0;)f(i)h
Fc(<)g Fe(maxCols;)e(i++\){)865 4116 y(t)h(=)h
(trivsql_xsnprintf\("trivsql_\045s_col\045d",)38 b(tname,)44
b(i\);)865 4199 y(u)g(=)h(trivsql_dbread\(gState,)c(t\);)865
4363 y(if\(strcmp\(retVal,)g(""\))k(!=)f(0\))640 4445
y(retVal2)g(=)h(trivsql_xsnprintf\("\045s;\045s",)40
b(retVal,)k(u\);)865 4527 y(else)640 4610 y(retVal2)g(=)h
(trivsql_xsnprintf\("\045s",)c(u\);)865 4774 y(trivsql_xfree\(t\);)865
4856 y(trivsql_xfree\(u\);)865 4938 y(trivsql_xfree\(retVal\);)865
5021 y(retVal)i(=)i(retVal2;)685 5103 y(})685 5267 y(return)f(retVal;)
596 5349 y(})p Black 3601 5585 a Fd(23)p Black eop
%%Page: 24 24
24 23 bop Black 0 TeXcolorgray Black 197 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 596 89 a Fe(int)44 b(trivsql_min\(int)e(a,)j(int)f(b\){)685
171 y(if\(a)g Fc(>)h Fe(b\))f(return)g(b;)685 253 y(return)g(a;)596
336 y(})596 500 y(void)g(trivsql_checktable\(char)d(*tname,)i
(trivsql_recordset)f(*rs\){)685 582 y(char)i(*t,)h(*u;)685
747 y(t)g(=)g(trivsql_xsnprintf\("trivsql_\045s_numrow)o(s",)39
b(tname\);)685 829 y(u)45 b(=)g(trivsql_dbread\(gState,)c(t\);)685
911 y(trivsql_xfree\(t\);)685 1075 y(if\(u)j(==)h(NULL\){)775
1158 y(\(*rs\).errno)e(=)h(TRIVSQL_NOSUCHTABLE;)775 1240
y(\(*rs\).errstring)e(=)j(trivsql_xsnprintf\("Existance)40
b(check)k(for)g(the)h(table)f(\\"\045s\\")f(de-)596 1322
y(termined)g(that)h(the)g(table)g(does)h(not)f(exist.",)f(tname\);)685
1404 y(})596 1486 y(})596 1651 y(trivsql_recordset*)e
(trivsql_makers\(char)h(*tname\){)685 1733 y(trivsql_recordset)g(*rrs;)
685 1897 y(//)j(Build)f(the)g(recordset)685 1979 y(rrs)h(=)f
(trivsql_xmalloc\(sizeof\(trivsql_recordset)o(\)\);)685
2062 y(rrs-)p Fc(>)p Fe(rows)f(=)i
(trivsql_xmalloc\(sizeof\(trivsql_row\)\);)685 2144 y(rrs-)p
Fc(>)p Fe(rows-)p Fc(>)p Fe(next)d(=)j(NULL;)685 2226
y(rrs-)p Fc(>)p Fe(rows-)p Fc(>)p Fe(cols)d(=)j(NULL;)685
2308 y(rrs-)p Fc(>)p Fe(numCols)e(=)i(0;)685 2390 y(rrs-)p
Fc(>)p Fe(numRows)e(=)i(0;)685 2473 y(rrs-)p Fc(>)p Fe(tname)e(=)i
(trivsql_xsnprintf\("\045s",)c(tname\);)685 2555 y(rrs-)p
Fc(>)p Fe(currentRow)h(=)j(rrs-)p Fc(>)p Fe(rows;)685
2637 y(rrs-)p Fc(>)p Fe(errno)e(=)i(TRIVSQL_FALSE;)685
2719 y(rrs-)p Fc(>)p Fe(errstring)e(=)h(NULL;)685 2801
y(rrs-)p Fc(>)p Fe(cols)f(=)i(NULL;)685 2966 y(if\(gState-)p
Fc(>)p Fe(db)e(==)h(NULL\){)775 3048 y(rrs-)p Fc(>)p
Fe(errno)f(=)i(TRIVSQL_DBOPENFAIL;)685 3130 y(})685 3295
y(return)f(rrs;)596 3377 y(})596 3541 y(trivsql_seltreenode*)d
(trivsql_makest\(\){)685 3623 y(trivsql_seltreenode)h(*rst;)685
3788 y(//)j(Build)f(the)g(recordset)685 3870 y(rst)h(=)f
(trivsql_xmalloc\(sizeof\(trivsql_seltreeno)o(de\)\);)685
3952 y(rst-)p Fc(>)p Fe(selArgOne)f(=)h(NULL;)685 4034
y(rst-)p Fc(>)p Fe(selColOne)f(=)h(-1;)685 4116 y(rst-)p
Fc(>)p Fe(selArgTwo)f(=)h(NULL;)685 4199 y(rst-)p Fc(>)p
Fe(selColTwo)f(=)h(-1;)685 4281 y(rst-)p Fc(>)p Fe(selector)f(=)h
(NULL;)685 4363 y(rst-)p Fc(>)p Fe(left)f(=)i(NULL;)685
4445 y(rst-)p Fc(>)p Fe(right)e(=)i(NULL;)685 4610 y(return)f(rst;)596
4692 y(})596 4856 y(trivsql_seltreenode*)d
(trivsql_makesel\(trivsql_selectorfunc)e(func,)44 b(char)g(*a1,)999
4938 y(char)g(*a2\){)685 5021 y(int)h(*colNumbers,)d(numCols;)685
5185 y(trivsql_seltreenode)g(*tst)i(=)h(trivsql_makest\(\);)685
5267 y(tst-)p Fc(>)p Fe(selector)e(=)h(func;)685 5432
y(if\(\(colNumbers)f(=)h(trivsql_parsecols\(gState-)p
Fc(>)p Fe(table,)c(a1,)k(&numCols\)\))f(==)i(NULL\){)p
Black 197 5585 a Fd(24)p Black eop
%%Page: 25 25
25 24 bop Black 0 TeXcolorgray Black 2034 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 865 89 a Fe(tst-)p Fc(>)p Fe(selArgOne)42 b(=)j(a1;)865
171 y(gState-)p Fc(>)p Fe(rs-)p Fc(>)p Fe(errno)c(=)k(TRIVSQL_FALSE;)
685 253 y(})685 336 y(else{)865 418 y(tst-)p Fc(>)p Fe(selColOne)d(=)j
(colNumbers[0];)685 500 y(})685 582 y(trivsql_xfree\(colNumbers\);)685
747 y(if\(\(colNumbers)e(=)h(trivsql_parsecols\(gState-)p
Fc(>)p Fe(table,)c(a2,)k(&numCols\)\))f(==)i(NULL\){)865
829 y(tst-)p Fc(>)p Fe(selArgTwo)d(=)j(a2;)865 911 y(gState-)p
Fc(>)p Fe(rs-)p Fc(>)p Fe(errno)c(=)k(TRIVSQL_FALSE;)685
993 y(})685 1075 y(else{)865 1158 y(tst-)p Fc(>)p Fe(selColTwo)d(=)j
(colNumbers[0];)685 1240 y(})685 1322 y(trivsql_xfree\(colNumbers\);)
685 1486 y(return)f(tst;)596 1569 y(})596 1733 y(trivsql_seltreenode*)d
(trivsql_makeslr\(trivsql_selectorfunc)e(func,)999 1815
y(trivsql_seltreenode)j(*left,)999 1897 y(trivsql_seltreenode)g
(*right\){)685 1979 y(trivsql_seltreenode*)g(tst)i(=)h
(trivsql_makest\(\);)685 2062 y(tst-)p Fc(>)p Fe(selector)e(=)h(func;)
685 2144 y(tst-)p Fc(>)p Fe(left)f(=)i(left;)685 2226
y(tst-)p Fc(>)p Fe(right)e(=)i(right;)596 2308 y(})596
2473 y(int)f(trivsql_executeselector\(trivsql_seltre)o(enode*)38
b(node,)44 b(int)h(row\){)685 2555 y(char)f(*a1,)g(*a2,)h(*t;)685
2719 y(if\(node)f(==)g(NULL\))775 2801 y(return)g(SELTRUE;)685
2966 y(if\(\(\(node-)p Fc(>)p Fe(selArgOne)e(!=)i(NULL\))g(||)h
(\(node-)p Fc(>)p Fe(selColOne)d(!=)i(-1\)\))g(&&)820
3048 y(\(\(node-)p Fc(>)p Fe(selArgTwo)e(!=)i(NULL\))g(||)h(\(node-)p
Fc(>)p Fe(selColTwo)d(!=)i(-1\)\)\){)775 3130 y(if\(node-)p
Fc(>)p Fe(selColOne)e(==)i(-1\))865 3212 y(a1)g(=)h(node-)p
Fc(>)p Fe(selArgOne;)775 3295 y(else{)865 3377 y(t)f(=)h
(trivsql_xsnprintf\("trivsql_\045s_col\045drow)o(\045d",)39
b(gState-)p Fc(>)p Fe(table,)909 3459 y(node-)p Fc(>)p
Fe(selColOne,)j(row\);)865 3541 y(a1)i(=)h(trivsql_dbread\(gState,)c
(t\);)865 3623 y(trivsql_xfree\(t\);)865 3788 y(if\(a1)i(==)i(NULL\))
640 3870 y(return)f(SELFALSE;)775 3952 y(})775 4116 y(if\(node-)p
Fc(>)p Fe(selColTwo)e(==)i(-1\))865 4199 y(a2)g(=)h(node-)p
Fc(>)p Fe(selArgTwo;)775 4281 y(else{)865 4363 y(t)f(=)h
(trivsql_xsnprintf\("trivsql_\045s_col\045drow)o(\045d",)39
b(gState-)p Fc(>)p Fe(table,)909 4445 y(node-)p Fc(>)p
Fe(selColTwo,)j(row\);)865 4527 y(a2)i(=)h(trivsql_dbread\(gState,)c
(t\);)865 4610 y(trivsql_xfree\(t\);)865 4774 y(if\(a2)i(==)i(NULL\))
640 4856 y(return)f(SELFALSE;)775 4938 y(})775 5103 y(return)g(\(node-)
p Fc(>)p Fe(selector\)\(a1,)d(a2\);)685 5185 y(})685
5349 y(return)j(\(node-)p Fc(>)p Fe(selector\)\(trivsql_executeselecto)
o(r\(node)o(-)p Fc(>)p Fe(lef)o(t,)39 b(row\),)820 5432
y(trivsql_executeselector\(node-)p Fc(>)p Fe(right,)f(row\)\);)p
Black 3601 5585 a Fd(25)p Black eop
%%Page: 26 26
26 25 bop Black 0 TeXcolorgray Black 197 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 596 89 a Fe(})596 253 y(int)44 b(trivsql_initok\(trivsql_state)c
(*state\){)685 336 y(if\(state-)p Fc(>)p Fe(db)j(==)h(NULL\))775
418 y(return)g(TRIVSQL_FALSE;)685 500 y(return)g(TRIVSQL_TRUE;)596
582 y(})596 757 y Fd(Code:)20 b(/home/mikal/opensour)o
(ce/trivsql/internal.c)596 922 y Fe(#include)43 b("trivsql.h")596
1004 y(#include)g Fc(<)p Fe(string.h)p Fc(>)596 1168
y Fe(int)h(trivsql_selequal\(char)d(*arg1,)j(char)g(*arg2\){)685
1251 y(if\(strcmp\(arg1,)e(arg2\))i(==)h(0\))f(return)g(SELTRUE;)685
1333 y(return)g(SELFALSE;)596 1415 y(})596 1579 y(//)g(todo:)g
(implement)f(\045's)596 1662 y(int)h(trivsql_sellike\(char)d(*arg1,)j
(char)g(*arg2\){)685 1744 y(int)h(front)e(=)i(0,)g(back)f(=)g(0,)h
(ret;)685 1826 y(char)f(*sel,)g(*str;)685 1990 y(sel)h(=)f
(strdup\(arg2\);)685 2155 y(if\(arg2[0])f(==)i('\045'\){)775
2237 y(front)f(=)g(1;)775 2319 y(sel++;)685 2401 y(})685
2566 y(if\(arg2[strlen\(arg2\))e(-)i(1])h(==)f('\045'\){)775
2648 y(back)g(=)h(1;)775 2730 y(sel[strlen\(sel\))d(-)j(1])f(=)h
('\\0';)685 2812 y(})685 2977 y(printf\("\045d)e(\045d)i
(\(\045s\)\\n",)e(front,)h(back,)g(sel\);)685 3141 y(if\(\(str)g(=)g
(strstr\(arg1,)f(sel\)\))h(!=)h(NULL\){)775 3223 y(if\(\(front)e(==)i
(1\))f(&&)h(\(str)f(==)g(arg1\)\))865 3305 y(ret)g(=)g(SELFALSE;)775
3388 y(else)865 3470 y(ret)g(=)g(SELTRUE;)685 3552 y(})685
3634 y(else)g(ret)h(=)f(SELFALSE;)685 3799 y(//trivsql_xfree\(sel\);)
685 3881 y(return)g(ret;)596 3963 y(})596 4127 y(int)g
(trivsql_selor\(int)e(left,)i(int)g(right\){)685 4209
y(if\(left)g(==)g(SELTRUE\))g(return)g(SELTRUE;)685 4292
y(if\(right)g(==)g(SELTRUE\))g(return)f(SELTRUE;)685
4374 y(return)h(SELFALSE;)596 4456 y(})596 4620 y(int)g
(trivsql_seland\(int)e(left,)i(int)g(right\){)685 4703
y(if\(left)g(==)g(SELFALSE\))g(return)f(SELFALSE;)685
4785 y(if\(right)h(==)g(SELFALSE\))f(return)h(SELFALSE;)685
4867 y(return)g(SELTRUE;)596 4949 y(})596 5124 y Fd(Code:)20
b(/home/mikal/opensour)o(ce/trivsql/selectors.c)596 5289
y Fe(#include)43 b Fc(<)p Fe(stdio.h)p Fc(>)596 5371
y Fe(#include)g("trivsql.h")p Black 197 5585 a Fd(26)p
Black eop
%%Page: 27 27
27 26 bop Black 0 TeXcolorgray Black 2034 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black 596 89 a Fe(int)44 b(main\(int)f(argc,)h(char)g(*argv[]\){)685
171 y(trivsql_state)f(*ourState;)685 253 y(trivsql_recordset)f(*rs;)685
336 y(char)i(cmd[1000];)685 500 y(if\(argc)g(!=)g(2\){)775
582 y(fprintf\(stderr,)e("Please)i(specify)f(a)i(db)g(file\\n"\);)775
664 y(exit\(42\);)685 747 y(})685 911 y(ourState)f(=)g
(trivsql_opendb\(argv[1]\);)685 993 y(if\(trivsql_initok\(ourState\))c
(!=)45 b(TRIVSQL_TRUE\){)775 1075 y(fprintf\(stderr,)d("Database)h
(open)i(failed\\n"\);)775 1158 y(exit\(42\);)685 1240
y(})685 1404 y(while\(fgets\(cmd,)d(1000,)i(stdin\))g(!=)h(NULL\){)775
1486 y(rs)f(=)h(trivsql_execute\(ourState,)c(cmd\);)775
1569 y(if\(rs)j(!=)g(NULL\))g(trivsql_displayrs\(rs\);)775
1651 y(else)g(printf\("NULL)f(recordset\\n"\);)775 1733
y(trivsql_xfree\(rs\);)685 1815 y(})596 1897 y(})596
2072 y Fd(Code:)20 b(/home/mikal/opensour)o(ce/trivsql/example.c)596
2204 y Fg(I)d(haven't)h(included)g(the)g(TDB)f(code,)g(as)h(it)g(is)g
(not)h(strictly)f(part)f(of)h Fi(trivsql)p Fg(,)e(and)h(may)h(be)g
(down-)596 2296 y(loaded)h(fr)o(om)i(http://www)-8 b(.samba.or)o(g)197
2625 y Fj(Notes)p Black 596 2771 a Fg(1.)p Black 69 w(Ther)o(e)25
b(ar)o(e)g(also)g(functions)i(which)g(allow)f(you)g(to)h(do)e(slightly)
i(mor)o(e)f(inter)o(esting)g(opera-)728 2863 y(tions,)c(such)f(as)g
(enumerating)g(all)f(of)h(the)g(keys)g(de\002ned)f(in)h(the)g
(database.)p Black 3601 5585 a Fd(27)p Black eop
%%Page: 28 28
28 27 bop Black 0 TeXcolorgray Black 197 -132 a Fd(trivsql:)21
b(A)g(trivial)f(SQL)h(engine)g(for)g(your)f(application)p
Black Black 197 5585 a(28)p Black eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
